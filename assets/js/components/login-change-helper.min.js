!function($){"use strict";$(document).ready(function(){var e=$("#change-login-form"),a=$("#login_name"),n=a.parents(".has-feedback"),s=e.find("input[type=submit]");if(e.length){var t=null,o=function(o){t&&clearTimeout(t),t=setTimeout(function(){n.addClass("loading"),n.removeClass("has-success").removeClass("has-error"),$.ajax(a.attr("data-check"),{type:"GET",dataType:"json",data:{login:a.val(),_wpnonce:e.find("input[name=_wpnonce]").val()},success:function(e){e.success?(n.addClass("has-success"),$("#login_nicename").val(e.niceName),s.prop("disabled",!1),o&&o()):(n.addClass("has-error"),s.prop("disabled",!0))},error:function(e){n.addClass("has-error"),s.prop("disabled",!0)},complete:function(){n.removeClass("loading")}})},1500)};a.keyup(function(e){$(this).val().length&&o()}),a.blur(function(e){$(this).val().length&&o()}),e.submit(function(n){n.preventDefault(),a.val().length&&confirm("ログイン名を変更します。よろしいですか？")&&o(function(){e.ajaxSubmit({dataType:"json",success:function(e){Hametuha.alert(e.message),setTimeout(function(){window.location.href=e.url},5e3)},error:function(){Hametuha.alert("更新に失敗しました。もう一度やり直してください。",!0)}})})})}})}(jQuery);