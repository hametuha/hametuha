!function(e){"use strict";var t=window.HametuhaReadingManager={alert:function(e){window.alert(e)},bookmarks:{},tweet:function(e){var t=jQuery("link[rel=canonical]").attr("href"),a="http://twitter.com/home?status=",n=a+encodeURIComponent("QT: "+e+" "+t+" #破滅派");window.open(n,"twitter","width=600, height=400, menubar=no, toolbar=no, scrollbars=yes").focus()},saveFrase:function(e,a,n){jQuery.post(HametuhaVars.endpoint,{action:HametuhaVars.addFavorite,_wpnonce:HametuhaVars.nonce,post_id:e,location:n,frase:a},function(e){var a=e.status?"テキストをお気に入りに登録しました。":"ごめんなさい、エラーが起きたためお気に入りに登録できませんでした。";t.getContainer().showNotification(a)})},addReview:function(e){jQuery.fancybox.open({href:HametuhaVars.feedbackURL+"&post_id="+e,title:"作品を評価する"},{type:"iframe",width:700})},isOpen:function(){return"-100%"!=jQuery("#reading-container").css("left")},toggleMetaPanel:function(e){e&&e.preventDefault();var t;switch(jQuery(this).attr("id")){case"meta-drawer":t="-100%";break;default:t=0}jQuery("#reading-container").css({left:t})},search:function(e){this.getContainer().searchContent(e)},getContainer:function(){return-1!=navigator.appName.indexOf("Microsoft")?window.reader:document.reader},fitHeight:function(){var e=jQuery("body").hasClass("mobile")?window.innerHeight:jQuery(window).height();jQuery("#reading-container").css("height",e-(jQuery("#wpadminbar").height()+jQuery("#post-feedback").height())),jQuery("body").hasClass("mobile")&&jQuery("#reading-container .inner").css("height",jQuery("#reading-container").height()-100)},embed:function(){swfobject.embedSWF(HametuhaVars.swf,"reader","100%","100%","10.2.0",HametuhaVars.expressInstall,{endpoint:HametuhaVars.endpoint,userID:HametuhaVars.userID,postID:HametuhaVars.postID,getContent:HametuhaVars.getContent,postTitle:HametuhaVars.postTitle,postAuthor:HametuhaVars.postAuthor,fontURL:HametuhaVars.fontSwf,isPreview:HametuhaVars.isPreview},{wmode:"transparent",quality:"AUTOHIGH",allowScriptAccess:"always",allowFullScreen:!0})},width:0,curPage:1,totalPage:0,pageWidth:0,startTime:0,startX:0,latestX:0,setupPagenation:function(){this.curPage=1,this.width=e(".post-content","#reading-container").width(),this.pageWidth=e(".inner","#reading-container").width(),this.totalPage=e(".post-content","#reading-container").width()/this.pageWidth},movePos:function(t){t=Math.max(1,t),e(".inner","#reading-container").scrollLeft(this.width-(t-1)*this.pageWidth),this.curPage=t},nextPage:function(){this.curPage++,this.movePos(this.curPage)},prevPage:function(){this.curPage--,this.curPage<1?this.curPage=1:this.movePos(this.curPage)},touchStart:function(e){t.startTime=(new Date).getTime(),t.startX=t.latestX=e.originalEvent.touches[0].pageX,jQuery("#reading-container .inner").bind("touchmove",t.touchMove)},touchMove:function(e){t.latestX=e.originalEvent.touches[0].pageX},touchEnd:function(a){e("#reading-container .inner").unbind("touchmove",t.touchMove);var n=t.latestX-t.startX,i=(new Date).getTime()-t.startTime;i>1999||Math.abs(n)<window.innerWidth/2}}}(jQuery),jQuery(document).ready(function(e){"use strict";var t=window.HametuhaReadingManager;if(e("#reading-container").length>0){var a=e(".single-post-content").remove();e("#meta-drawer, #meta-opener").click(t.toggleMetaPanel),e("#search").focus(function(t){e(this).parents("form").addClass("active")}),e("#search").blur(function(t){e(this).parents("form").removeClass("active")}),e("#search-box").submit(function(a){a.preventDefault();var n=e("#search").val();n.length>0&&t.search(n)});var n=setInterval(function(){var a=parseInt(e("#reader-open-indicator strong").text())-1;return 0>a?(e("#reader-open-indicator").remove(),clearInterval(n),void(t.isOpen()||t.toggleMetaPanel(!1))):void e("#reader-open-indicator strong").text(a)},1e3);t.fitHeight(),jQuery(window).resize(function(e){t.fitHeight()}),e("body").hasClass("mobile")?(e("#reading-container .inner").append(a),setTimeout(function(){window.scrollTo(0,1),t.fitHeight()},100),e(window).scroll(t.fitHeight),t.setupPagenation(),t.movePos(1)):t.embed()}});
//# sourceMappingURL=map/reading-manager.js.map