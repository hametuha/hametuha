!function(e){"use strict";angular.module("hametuha").controller("workContent",["$scope","$element",function(e,t){e.selection="",e.selectionTop=0,e.contentHeight=0,e.updateText=function(){var n=window.getSelection();if(e.selection=n.toString(),e.contentHeight=t[0].offsetHeight,"Range"===n.type){var o=n.getRangeAt(0).cloneRange(),i=o.getBoundingClientRect();e.selectionTop=i.top-t[0].offsetTop-50}else e.selectionTop=0}}]).directive("textHolder",["$http",function(e){return{restrict:"E",replace:!0,scope:{selection:"=",selectionTop:"=",contentHeight:"=",id:"@"},templateUrl:Hametuha.template("text-holder.html"),link:function(t,n,o){t.styleTop=0,t.display="none",t.$watch("selection",function(e,n){e.length?(t.styleTop=t.selectionTop+document.body.scrollTop+"px",t.display="block"):t.display="none"}),t.share=function(){if(t.selection.length){var n=t.selection+"";return t.selection="",Hametuha.alert("リクエストしています……"),e({method:"POST",url:wpApiSettings.root+"hametuha/v1/text/of/"+t.id+"/",headers:{"X-WP-Nonce":wpApiSettings.nonce},data:{id:t.id,text:n}}).then(function(e){Hametuha.alert(e.data.message)},function(e){var t=e.data?e.data.message:"エラーが発生しました。やりなおしてください。";Hametuha.alert(t,!0)}).then(function(){t.selection=""})}}}}}])}(jQuery);
//# sourceMappingURL=../map/components/share.js.map
