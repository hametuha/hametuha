angular.module("hametuha").controller("followed",["$scope","$http",function(a,n){"use strict";var i=wpApiSettings.root+"hametuha/v1/doujin/";a.tabs=[{active:!1,init:!1,loading:!1},{active:!1,init:!1,loading:!1}],a.detectTab=function(){switch(document.location.hash){case"#following":a.tabs[1].active=!0;break;default:a.tabs[0].active=!0}},a.initFollowers=function(o){if(!a.tabs[o].init){switch(o){case 1:a.getFollowings(0);break;default:a.getFollowers(0)}a.tabs[o].init=!0}},a.followers=[],a.followersOffset=0,a.followersTotal=1,a.followersMore=!0,a.getFollowers=function(o){a.tabs[0].loading=!0,n({method:"GET",url:i+"followers/me/",headers:{"X-WP-Nonce":wpApiSettings.nonce},params:{offset:o}}).then(function(o){a.followersTotal=o.data.total,a.followersOffset=o.data.offset,o.data.users.length?angular.forEach(o.data.users,function(o){a.followers.push(o)}):(a.followersMore=!1,Hametuha.alert("フォロワーはこれ以上いません")),a.tabs[0].loading=!1},function(o){Hametuha.alert("フォロワーを取得できませんでした",!0),a.tabs[0].loading=!1})},a.nextFollowers=function(){a.getFollowers(a.followersOffset+20)},a.followings=[],a.followingOffset=0,a.followingTotal=1,a.followingMore=!0,a.getFollowings=function(o){a.tabs[1].loading=!0,n({method:"GET",url:i+"following/me/",headers:{"X-WP-Nonce":wpApiSettings.nonce},params:{offset:o}}).then(function(o){a.followingTotal=o.data.total,a.followingOffset=o.data.offset,o.data.users.length?angular.forEach(o.data.users,function(o){a.followings.push(o)}):(a.followingMore=!1,Hametuha.alert("フォロワーしている人はもういません")),a.tabs[1].loading=!1},function(o){Hametuha.alert("フォローしている人を取得できませんでした",!0),a.tabs[1].loading=!1})},a.removeFollowing=function(e){Hametuha.confirm("フォローを解除してよろしいですか？",function(){for(var t=null,o=0,l=a.followings.length;o<l;o++)if(a.followings[o].ID==e){t=o;break}null!==t&&(a.tabs[1].loading=!0,n({method:"DELETE",url:i+"follow/"+e+"/",headers:{"X-WP-Nonce":wpApiSettings.nonce}}).then(function(o){o.data.success&&(a.followings.splice(t,1),a.followingTotal--),a.tabs[1].loading=!1},function(){Hametuha.alert("削除できませんでした。",!0),a.tabs[1].loading=!1}))},!0)},a.nextFollowing=function(){a.getFollowings(a.followingOffset+20)}}]);
//# sourceMappingURL=../map/components/followers.js.map
