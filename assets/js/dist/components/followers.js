angular.module("hametuFollower",["ui.bootstrap"]).controller("followed",["$scope","$http",function(o,l){var t=WP_API_Settings.root+"hametuha/v1/doujin/";o.tabs=[{active:!1,init:!1,loading:!1},{active:!1,init:!1,loading:!1}],o.detectTab=function(){var l=document.location.hash;switch(l){case"#following":o.tabs[1].active=!0;break;default:o.tabs[0].active=!0}},o.initFollowers=function(l){if(!o.tabs[l].init){switch(l){case 1:o.getFollowings(0);break;default:o.getFollowers(0)}o.tabs[l].init=!0}},o.followers=[],o.followersOffset=0,o.followersTotal=1,o.followersMore=!0,o.getFollowers=function(n){o.tabs[0].loading=!0,l({method:"GET",url:t+"followers/me/",headers:{"X-WP-Nonce":WP_API_Settings.nonce},params:{offset:n}}).then(function(l){o.followersTotal=l.data.total,o.followersOffset=l.data.offset,l.data.users.length?angular.forEach(l.data.users,function(l){o.followers.push(l)}):o.followersMore=!1,o.tabs[0].loading=!1},function(l){Hametuha.alert("フォロワーを取得できませんでした",!0),o.tabs[0].loading=!1})},o.nextFollowers=function(){o.getFollowers(o.followersOffset+20)},o.followings=[],o.followingOffset=0,o.followingTotal=1,o.followingMore=!0,o.getFollowings=function(n){o.tabs[1].loading=!0,l({method:"GET",url:t+"following/me/",headers:{"X-WP-Nonce":WP_API_Settings.nonce},params:{offset:n}}).then(function(l){o.followingTotal=l.data.total,o.followingOffset=l.data.offset,l.data.users.length?angular.forEach(l.data.users,function(l){o.followings.push(l)}):o.followingMore=!1,o.tabs[1].loading=!1},function(l){Hametuha.alert("フォローしている人を取得できませんでした",!0),o.tabs[1].loading=!1})},o.removeFollowing=function(n){Hametuha.confirm("フォローを解除してよろしいですか？",function(){for(var e=null,a=0,s=o.followings.length;s>a;a++)if(o.followings[a].ID==n){e=a;break}null!==e&&(o.tabs[1].loading=!0,l({method:"DELETE",url:t+"follow/"+n+"/",headers:{"X-WP-Nonce":WP_API_Settings.nonce}}).then(function(l){l.data.success&&(o.followings.splice(e,1),o.followingTotal--),o.tabs[1].loading=!1},function(){Hametuha.alert("削除できませんでした。",!0),o.tabs[1].loading=!1}))},!0)},o.nextFollowing=function(){o.getFollowings(o.followingOffset+20)}}]);
//# sourceMappingURL=../map/components/followers.js.map