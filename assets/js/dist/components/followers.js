angular.module("hametuha",["ui.bootstrap"]).controller("followed",["$scope","$http",function(o,t){"use strict";var l=WP_API_Settings.root+"hametuha/v1/doujin/";o.tabs=[{active:!1,init:!1,loading:!1},{active:!1,init:!1,loading:!1}],o.detectTab=function(){var t=document.location.hash;switch(t){case"#following":o.tabs[1].active=!0;break;default:o.tabs[0].active=!0}},o.initFollowers=function(t){if(!o.tabs[t].init){switch(t){case 1:o.getFollowings(0);break;default:o.getFollowers(0)}o.tabs[t].init=!0}},o.followers=[],o.followersOffset=0,o.followersTotal=1,o.followersMore=!0,o.getFollowers=function(a){o.tabs[0].loading=!0,t({method:"GET",url:l+"followers/me/",headers:{"X-WP-Nonce":WP_API_Settings.nonce},params:{offset:a}}).then(function(t){o.followersTotal=t.data.total,o.followersOffset=t.data.offset,t.data.users.length?angular.forEach(t.data.users,function(t){o.followers.push(t)}):(o.followersMore=!1,Hametuha.alert("フォロワーはこれ以上いません")),o.tabs[0].loading=!1},function(t){Hametuha.alert("フォロワーを取得できませんでした",!0),o.tabs[0].loading=!1})},o.nextFollowers=function(){o.getFollowers(o.followersOffset+20)},o.followings=[],o.followingOffset=0,o.followingTotal=1,o.followingMore=!0,o.getFollowings=function(a){o.tabs[1].loading=!0,t({method:"GET",url:l+"following/me/",headers:{"X-WP-Nonce":WP_API_Settings.nonce},params:{offset:a}}).then(function(t){o.followingTotal=t.data.total,o.followingOffset=t.data.offset,t.data.users.length?angular.forEach(t.data.users,function(t){o.followings.push(t)}):(o.followingMore=!1,Hametuha.alert("フォロワーしている人はもういません")),o.tabs[1].loading=!1},function(t){Hametuha.alert("フォローしている人を取得できませんでした",!0),o.tabs[1].loading=!1})},o.removeFollowing=function(a){Hametuha.confirm("フォローを解除してよろしいですか？",function(){for(var e=null,n=0,s=o.followings.length;s>n;n++)if(o.followings[n].ID==a){e=n;break}null!==e&&(o.tabs[1].loading=!0,t({method:"DELETE",url:l+"follow/"+a+"/",headers:{"X-WP-Nonce":WP_API_Settings.nonce}}).then(function(t){t.data.success&&(o.followings.splice(e,1),o.followingTotal--),o.tabs[1].loading=!1},function(){Hametuha.alert("削除できませんでした。",!0),o.tabs[1].loading=!1}))},!0)},o.nextFollowing=function(){o.getFollowings(o.followingOffset+20)}}]);
//# sourceMappingURL=../map/components/followers.js.map