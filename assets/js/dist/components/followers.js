angular.module("hametuFollower",["ui.bootstrap"]).controller("followed",["$scope","$http",function(o,t){var l=WP_API_Settings.root+"hametuha/v1/doujin/";o.tabs=[{active:!1,init:!1},{active:!1,init:!1}],o.detectTab=function(){var t=document.location.hash;switch(t){case"#following":o.tabs[1].active=!0;break;default:o.tabs[0].active=!0}},o.initFollowers=function(t){if(!o.tabs[t].init){switch(t){case 1:o.getFollowings(0);break;default:o.getFollowers(0)}o.tabs[t].init=!0}},o.followers=[],o.followersOffset=0,o.followersTotal=1,o.followersMore=!0,o.getFollowers=function(e){t({method:"GET",url:l+"followers/me/",headers:{"X-WP-Nonce":WP_API_Settings.nonce},params:{offset:e}}).then(function(t){o.followersTotal=t.data.total,o.followersOffset=t.data.offset,t.data.users.length?angular.forEach(t.data.users,function(t){o.followers.push(t)}):o.followersMore=!1},function(o){Hametuha.alert("フォロワーを取得できませんでした",!0)})},o.nextFollowers=function(){o.getFollowers(o.followersOffset+20)},o.followings=[],o.followingOffset=0,o.followingTotal=1,o.followingMore=!0,o.getFollowings=function(e){t({method:"GET",url:l+"following/me/",headers:{"X-WP-Nonce":WP_API_Settings.nonce},params:{offset:e}}).then(function(t){o.followingTotal=t.data.total,o.followingOffset=t.data.offset,t.data.users.length?angular.forEach(t.data.users,function(t){o.followings.push(t)}):o.followingMore=!1},function(o){Hametuha.alert("フォローしている人を取得できませんでした",!0)})},o.removeFollowing=function(e){Hametuha.confirm("フォローを解除してよろしいですか？",function(){for(var n=null,a=0,f=o.followings.length;f>a;a++)if(o.followings[a].ID==e){n=a;break}null!==n&&t({method:"DELETE",url:l+"follow/"+e+"/",headers:{"X-WP-Nonce":WP_API_Settings.nonce}}).then(function(t){t.data.success&&o.followings.splice(n,1)},function(){Hametuha.alert("削除できませんでした。",!0)})})},o.nextFollowers=function(){o.getFollowings(o.followingOffset+20)}}]);
//# sourceMappingURL=../map/components/followers.js.map