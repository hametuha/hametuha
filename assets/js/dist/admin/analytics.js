!function(s){"use strict";google.load("visualization","1",null),s(document).ready(function(){s(".datepicker").datepicker({dateFormat:"yy-mm-dd",changeYear:!0})}),google.setOnLoadCallback(function(){var r={};s(".stat").on("update.analytics.hametuha",function(a,t,o,i){var n=s(this),e=n.attr("id");n.removeClass("no-data").addClass("loading"),s.get(n.attr("data-endpoint"),{from:o,to:i}).done(function(a){if(a&&a.data){if(r[e]||(r[e]=new google.visualization.ChartWrapper({chartType:n.attr("data-type"),containerId:n.find(".stat__container").attr("id")})),r[e].setOptions(a.options),a.data.cols)r[e].setDataTable(a.data);else{var t=google.visualization.arrayToDataTable(a.data);r[e].setDataTable(t)}r[e].draw()}else n.addClass("no-data")}).fail(function(a,t,o){window.alert(o)}).always(function(){n.removeClass("loading")})});var i=!1;s("#analytics-date-form").submit(function(a){a.preventDefault();var t=s(this).find("input[name=from]").val(),o=s(this).find("input[name=to]").val();s(".stat").trigger("update.analytics.hametuha",[s(this).attr("action"),t,o]),window.history&&window.history.pushState&&(i?history.pushState({from:t,to:o},document.title,window.location.pathname+"?from="+t+"&to="+o):i=!0)}).trigger("submit");var a=null;s(window).resize(function(){a&&clearTimeout(a),a=setTimeout(function(){for(var a in r)r.hasOwnProperty(a)&&r[a].draw()},500)})})}(jQuery);
//# sourceMappingURL=../map/admin/analytics.js.map
