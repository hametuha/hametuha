{"version":3,"sources":["components/user-select.js"],"names":["$","select2","select","language","placeholder","maximumSelectionLength","minimumInputLength","templateResult","user","avatar","text","ajax","url","HametuhaUserSelect","endpoint","attr","dataType","delay","data","params","s","term","mode","this","_wpnonce","nonce","processResults","items","i","l","length","push","id","ID","name","role","console","log","results","pagination","more","escapeMarkup","markup","document","on","ready","each","index","jQuery"],"mappings":"CAMA,SAAWA,GAET,YAEA,IAAIC,GAAU,SAASC,GACrBF,EAAEE,GAAQD,SACRE,SAAU,KACVC,YAAa,WACbC,uBAAwB,EACxBC,mBAAoB,EACpBC,eAAgB,SAASC,GACvB,MAAOR,GAAE,qDAAuDQ,EAAKC,OAAS,OAASD,EAAKE,KAAO,YAErGC,MACEC,IAAKC,mBAAmBC,SAAWd,EAAEE,GAAQa,KAAK,aAClDC,SAAU,OACVC,MAAO,IACPC,KAAM,SAASC,GACb,OACEC,EAAGD,EAAOE,KACVC,KAAMtB,EAAEuB,MAAMR,KAAK,aACnBS,SAAUX,mBAAmBY,QAGjCC,eAAgB,SAAUR,EAAMC,GAE9B,IAAK,GADDQ,MACKC,EAAI,EAAGC,EAAIX,EAAKY,OAAYD,EAAJD,EAAOA,IACtCD,EAAMI,MACJC,GAAId,EAAKU,GAAGK,GACZvB,KAAMQ,EAAKU,GAAGM,KAAO,IAAMhB,EAAKU,GAAGO,KAAO,IAC1C1B,OAAQS,EAAKU,GAAGnB,QAIpB,OADA2B,SAAQC,IAAIV,IAEVW,QAASX,EACTY,YACEC,MAAM,KAIZC,aAAc,SAAUC,GACtB,MAAOA,OAMf1C,GAAE2C,UAAUC,GAAI,yBAA0B,UAAW,WACnD3C,EAAQsB,QAGVvB,EAAE2C,UAAUE,MAAM,WAChB7C,EAAE,qCAAqC8C,KAAK,SAASC,EAAO7C,GAC1DkC,QAAQC,IAAId,MACZtB,EAAQC,QAIX8C","file":"components/user-select.js","sourcesContent":["/**\n * Description\n */\n\n/*global HametuhaUserSelect: true*/\n\n(function ($) {\n\n  'use strict';\n\n  var select2 = function(select){\n    $(select).select2({\n      language: 'ja',\n      placeholder: '検索してください',\n      maximumSelectionLength: 1,\n      minimumInputLength: 2,\n      templateResult: function(user){\n        return $('<span class=\"user-selector-item\"><img alt=\"\" src=\"' + user.avatar + '\" />' + user.text + '</span>');\n      },\n      ajax:{\n        url: HametuhaUserSelect.endpoint + $(select).attr('data-mode'),\n        dataType: 'json',\n        delay: 300,\n        data: function(params){\n          return {\n            s: params.term,\n            mode: $(this).attr('data-mode'),\n            _wpnonce: HametuhaUserSelect.nonce\n          };\n        },\n        processResults: function (data, params) {\n          var items = [];\n          for( var i = 0, l = data.length; i < l; i++){\n            items.push({\n              id: data[i].ID,\n              text: data[i].name + '（' + data[i].role + '）',\n              avatar: data[i].avatar\n            });\n          }\n          console.log(items);\n          return {\n            results: items,\n            pagination: {\n              more: false\n            }\n          };\n        },\n        escapeMarkup: function (markup) {\n          return markup;\n        }\n      }\n    });\n  };\n\n  $(document).on( 'initialized.userSelect', '.select', function(){\n    select2(this);\n  } );\n\n  $(document).ready(function(){\n    $('select[data-module=\"user-select\"]').each(function(index, select){\n      console.log(this);\n      select2(select);\n    });\n  });\n\n})(jQuery);\n"],"sourceRoot":"/source/"}