{"version":3,"sources":["components/series-helper.js"],"names":["$","document","ready","$container","imagesLoaded","masonry","itemSelector","click","e","preventDefault","this","attr","find","removeClass","remove","on","url","title","Hametuha","modal","open","box","$body","empty","get","done","result","html","fail","always","$form","$button","errorHandler","msg","$error","before","setTimeout","ajaxSubmit","success","after","message","close","error","jQuery"],"mappings":"CAQA,SAAWA,GACP,aAGAA,EAAEC,UAAUC,MAAM,WAGd,IAAIC,EAAaH,EAAE,iBACnBG,EAAWC,aAAc,WACrBD,EAAWE,QAAQ,CACfC,aAAc,oBAKtBN,EAAE,uCAAuCO,MAAM,SAASC,GACpDA,EAAEC,iBACFT,EAAEA,EAAEU,MAAMC,KAAK,SAASC,KAAK,WAAWC,YAAY,UACpDb,EAAEU,MAAMI,WAIZd,EAAE,mBAAmBe,GAAG,QAAS,SAAUP,GACvCA,EAAEC,iBACF,IAAIO,EAAMhB,EAAEU,MAAMC,KAAK,QACnBM,EAAQjB,EAAEU,MAAMC,KAAK,cACzBO,SAASC,MAAMC,KAAKH,EAAO,SAASI,GAChC,IAAIC,EAAQD,EAAIT,KAAK,eACrBU,EAAMC,QACNvB,EAAEwB,IAAIR,GAAKS,KAAK,SAASC,GACrBJ,EAAMK,KAAKD,KACZE,KAAK,WACJN,EAAMK,KAAK,yDACZE,OAAO,WACNR,EAAIR,YAAY,iBAM5Bb,EAAEC,UAAUc,GAAG,SAAU,oBAAqB,SAASP,GACnDA,EAAEC,iBACF,IAAIqB,EAAQ9B,EAAEU,MACVqB,EAAUD,EAAMlB,KAAK,sBACrBoB,EAAe,SAASC,GACpB,IAAIC,EAASlC,EAAE,mCAAqCiC,EAAM,UAC1DH,EAAMK,OAAOD,GACbH,EAAQpB,KAAK,YAAY,GACzByB,WAAW,WACPF,EAAOpB,UACR,MAEXiB,EAAQpB,KAAK,YAAY,GACzBmB,EAAMO,WAAW,CACbC,QAAS,SAAUZ,GACXA,EAAOY,SACPR,EAAMS,MAAM,oCAAsCb,EAAOc,QAAU,UACnEV,EAAMhB,SACNsB,WAAWlB,SAASC,MAAMsB,MAAO,OAEjCT,EAAaN,EAAOc,UAG5BE,MAAO,WACHV,EAAa,qBAhEjC,CAuEGW","file":"../../components/series-helper.js","sourcesContent":["/**\n * Description\n */\n\n/*global Modernizr: true*/\n/*global Hametuha: true */\n/*global HametuhaGenreStatic: true*/\n\n(function ($) {\n    'use strict';\n\n\n    $(document).ready(function(){\n\n        // masonry\n        var $container = $('.series__list');\n        $container.imagesLoaded( function() {\n            $container.masonry({\n                itemSelector: '.series__item'\n            });\n        });\n\n        // more\n        $('a[href=\"#series-testimonials-list\"]').click(function(e){\n            e.preventDefault();\n            $($(this).attr('href')).find('.hidden').removeClass('hidden');\n            $(this).remove();\n        });\n\n        // レビュー追加\n        $('.review-creator').on('click', function( e ){\n            e.preventDefault();\n            var url = $(this).attr('href'),\n                title = $(this).attr('data-title');\n            Hametuha.modal.open(title, function(box){\n                var $body = box.find('.modal-body');\n                $body.empty();\n                $.get(url).done(function(result){\n                    $body.html(result);\n                }).fail(function(){\n                    $body.html('<div class=\"alert alert-danger\">レビューを追加できません。</div>');\n                }).always(function(){\n                    box.removeClass('loading');\n                });\n            });\n        });\n\n        // レビュー送信\n        $(document).on('submit', '#testimonial-form', function(e){\n            e.preventDefault();\n            var $form = $(this),\n                $button = $form.find('input[type=submit]'),\n                errorHandler = function(msg){\n                    var $error = $('<div class=\"alert alert-danger\">' + msg + '</div>');\n                    $form.before($error);\n                    $button.attr('disabled', false);\n                    setTimeout(function(){\n                        $error.remove();\n                    }, 3000);\n                };\n            $button.attr('disabled', true);\n            $form.ajaxSubmit({\n                success: function( result ){\n                    if( result.success ){\n                        $form.after('<div class=\"alert alert-success\">' + result.message + '</div>');\n                        $form.remove();\n                        setTimeout(Hametuha.modal.close, 1500);\n                    }else{\n                        errorHandler(result.message);\n                    }\n                },\n                error: function(){\n                    errorHandler('送信に失敗しました。');\n                }\n            });\n        });\n\n    });\n\n})(jQuery);\n"]}