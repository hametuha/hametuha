{"version":3,"sources":["components/edit-profile-helper.js"],"names":["$","document","ready","haMediaFrame","$picker","$img","find","on","e","preventDefault","wp","media","frames","className","frame","multiple","title","library","type","button","text","src","attachment","state","get","first","toJSON","sizes","pinky","url","full","attr","val","id","effect","open","jQuery"],"mappings":"CAMA,SAAWA,GAEP,aAEAA,EAAEC,UAAUC,MAAM,WAEd,IAAIC,EACAC,EAAUJ,EAAE,gBAAiB,mBAC7BK,EAAOD,EAAQE,KAAK,YAGxBF,EAAQG,GAAG,QAAS,kBAAmB,SAASC,GAE5CA,EAAEC,iBAEGN,IAEDA,EAAeO,GAAGC,MAAMC,OAAOT,aAAeO,GAAGC,MAAM,CACnDE,UAAW,6BACXC,MAAO,SACPC,UAAU,EACVC,MAAO,4BACPC,QAAS,CACLC,KAAM,SAEVC,OAAQ,CACJC,KAAM,gBAIDb,GAAG,SAAU,WAEtB,IACIc,EADAC,EAAanB,EAAaoB,QAAQC,IAAI,aAAaC,QAAQC,SAI/DL,EAAMC,EAAWK,MAAMC,MAAQN,EAAWK,MAAMC,MAAMC,IAAMP,EAAWK,MAAMG,KAAKD,IAClFxB,EAAK0B,KAAK,MAAOV,GACjBjB,EAAQE,KAAK,SAAS0B,IAAIV,EAAWW,IACrC7B,EAAQE,KAAK,KAAK4B,OAAO,eAGjC/B,EAAagC,SAIjB/B,EAAQG,GAAG,QAAS,UAAW,SAASC,GACpCA,EAAEC,iBACFJ,EAAK0B,KAAK,MAAO1B,EAAK0B,KAAK,aAC3B3B,EAAQE,KAAK,SAAS0B,IAAI,IAC1B5B,EAAQE,KAAK,KAAK4B,OAAO,iBAlDrC,CAwDGE","file":"../../components/edit-profile-helper.js","sourcesContent":["/**\n * Description\n */\n\n/*global wp: true*/\n\n(function ($) {\n\n    'use strict';\n\n    $(document).ready(function(){\n\n        var haMediaFrame, // メディアフレーム\n            $picker = $('.image-picker', '#wpbody-content'), // プロフィール\n            $img = $picker.find('.new-img'); // プレースホルダー\n\n        // 画像の指定\n        $picker.on('click', '.button-primary', function(e){\n            // デフォルトイベントの抑止\n            e.preventDefault();\n\n            if( !haMediaFrame ){\n                // はじめてなので、メディアフレームを初期化\n                haMediaFrame = wp.media.frames.haMediaFrame = wp.media({\n                    className: 'media-frame ha-media-frame',\n                    frame: 'select',\n                    multiple: false,\n                    title: '使用する画像をアップロードまたは選択してください。',\n                    library: {\n                        type: 'image'\n                    },\n                    button: {\n                        text: '選択した画像を選ぶ'\n                    }\n                });\n                // 選択した場合のイベントをバインド\n                haMediaFrame.on('select', function(){\n                    // アタッチメントの情報を取得\n                    var attachment = haMediaFrame.state().get('selection').first().toJSON(),\n                        src;\n                    // 画像のSRCを取得&設定。小さいサイズがあれば取得し、なければフルサイズ\n                    // pinkyは add_image_size で追加したオリジナルサイズ\n                    src = attachment.sizes.pinky ? attachment.sizes.pinky.url : attachment.sizes.full.url;\n                    $img.attr('src', src);\n                    $picker.find('input').val(attachment.id);\n                    $picker.find('p').effect('highlight');\n                });\n            }\n            haMediaFrame.open();\n        });\n\n        // 画像の解除\n        $picker.on('click', '.button', function(e){\n            e.preventDefault();\n            $img.attr('src', $img.attr('data-src'));\n            $picker.find('input').val('');\n            $picker.find('p').effect('highlight');\n        });\n\n\n    });\n\n})(jQuery);\n"]}