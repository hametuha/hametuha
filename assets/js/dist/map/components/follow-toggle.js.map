{"version":3,"sources":["components/follow-toggle.js"],"names":["$","document","on","e","endpoint","WP_API_Settings","root","this","attr","$btn","following","hasClass","preventDefault","Hametuha","confirm","ajax","url","method","beforeSend","xhr","setRequestHeader","nonce","data","done","response","removeClass","fail","alert","addClass","jQuery"],"mappings":"CAMA,SAAWA,GAEP,YAGAA,GAAEC,UAAUC,GAAG,QAAS,eAAgB,SAASC,GAC7C,GAAIC,GAAWC,gBAAgBC,KAAO,6BAA+BN,EAAEO,MAAMC,KAAK,oBAAsB,IACpGC,EAAOT,EAAEO,MACTG,EAAYV,EAAEO,MAAMI,SAAS,gBACjCR,GAAES,iBACEF,EACAG,SAASC,QAAQ,oBAAqB,WAClCd,EAAEe,MACEC,IAAKZ,EACLa,OAAQ,SACRC,WAAY,SAAWC,GACnBA,EAAIC,iBAAkB,aAAcf,gBAAgBgB,QAExDC,UACAC,KAAM,SAAWC,GACjBf,EAAKgB,YAAY,mBAClBC,KAAK,WACJb,SAASc,MAAM,uBAIvB3B,EAAEe,MACEC,IAAKZ,EACLa,OAAQ,OACRC,WAAY,SAAWC,GACnBA,EAAIC,iBAAkB,aAAcf,gBAAgBgB,QAExDC,UACAC,KAAM,SAAWC,GACjBf,EAAKmB,SAAS,mBACfF,KAAK,WACLb,SAASc,MAAM,6CAO3BE","file":"components/follow-toggle.js","sourcesContent":["/**\n * Description\n */\n\n/*global WP_API_Settings: true*/\n\n(function ($) {\n\n    \"use strict\";\n\n    // フォロー・アンフォロー\n    $(document).on('click', 'a.btn-follow', function(e){\n        var endpoint = WP_API_Settings.root + 'hametuha/v1/doujin/follow/' + $(this).attr('data-follower-id') + '/',\n            $btn = $(this),\n            following = $(this).hasClass('btn-following');\n        e.preventDefault();\n        if( following ){\n            Hametuha.confirm('フォローを解除してよろしいですか？', function(){\n                $.ajax( {\n                    url: endpoint,\n                    method: 'DELETE',\n                    beforeSend: function ( xhr ) {\n                        xhr.setRequestHeader( 'X-WP-Nonce', WP_API_Settings.nonce );\n                    },\n                    data:{}\n                } ).done( function ( response ) {\n                    $btn.removeClass('btn-following');\n                }).fail(function(){\n                    Hametuha.alert('フォローを解除できませんでした');\n                });\n            });\n        }else{\n            $.ajax( {\n                url: endpoint,\n                method: 'POST',\n                beforeSend: function ( xhr ) {\n                    xhr.setRequestHeader( 'X-WP-Nonce', WP_API_Settings.nonce );\n                },\n                data:{}\n            } ).done( function ( response ) {\n                $btn.addClass('btn-following');\n            }).fail(function(){\n               Hametuha.alert('フォローに失敗しました。すでにフォロー済みか、サーバが混み合っています。');\n            });\n        }\n\n    });\n\n\n})(jQuery);\n"],"sourceRoot":"/source/"}