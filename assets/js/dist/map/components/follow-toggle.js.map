{"version":3,"sources":["components/follow-toggle.js"],"names":["$","document","on","e","endpoint","WP_API_Settings","root","this","attr","$btn","following","hasClass","preventDefault","Hametuha","confirm","addClass","ajax","url","method","beforeSend","xhr","setRequestHeader","nonce","data","done","response","removeClass","fail","alert","always","jQuery"],"mappings":"CAOA,SAAWA,GAEP,YAGAA,GAAEC,UAAUC,GAAG,QAAS,eAAgB,SAASC,GAC7C,GAAIC,GAAWC,gBAAgBC,KAAO,6BAA+BN,EAAEO,MAAMC,KAAK,oBAAsB,IACpGC,EAAOT,EAAEO,MACTG,EAAYV,EAAEO,MAAMI,SAAS,gBACjCR,GAAES,iBACEH,EAAKE,SAAS,yBAGdD,EACAG,SAASC,QAAQ,oBAAqB,WAClCL,EAAKM,SAAS,uBACdf,EAAEgB,MACEC,IAAKb,EACLc,OAAQ,SACRC,WAAY,SAAWC,GACnBA,EAAIC,iBAAkB,aAAchB,gBAAgBiB,QAExDC,UACAC,KAAM,SAAWC,GACjBhB,EAAKiB,YAAY,mBAClBC,KAAK,WACJd,SAASe,MAAM,mBAAmB,KACnCC,OAAO,WACPpB,EAAKiB,YAAY,2BAErB,IAEHjB,EAAKM,SAAS,uBACdf,EAAEgB,MACEC,IAAKb,EACLc,OAAQ,OACRC,WAAY,SAAWC,GACnBA,EAAIC,iBAAkB,aAAchB,gBAAgBiB,QAExDC,UACAC,KAAM,SAAWC,GACjBhB,EAAKM,SAAS,mBACfY,KAAK,WACLd,SAASe,MAAM,wCAAwC,KACvDC,OAAO,WACNpB,EAAKiB,YAAY,8BAO9BI","file":"components/follow-toggle.js","sourcesContent":["/**\n * Description\n */\n\n/*global Hametuha: true*/\n/*global WP_API_Settings: true*/\n\n(function ($) {\n\n    \"use strict\";\n\n    // フォロー・アンフォロー\n    $(document).on('click', 'a.btn-follow', function(e){\n        var endpoint = WP_API_Settings.root + 'hametuha/v1/doujin/follow/' + $(this).attr('data-follower-id') + '/',\n            $btn = $(this),\n            following = $(this).hasClass('btn-following');\n        e.preventDefault();\n        if( $btn.hasClass('btn-follow--loading') ){\n            return;\n        }\n        if( following ){\n            Hametuha.confirm('フォローを解除してよろしいですか？', function(){\n                $btn.addClass('btn-follow--loading');\n                $.ajax( {\n                    url: endpoint,\n                    method: 'DELETE',\n                    beforeSend: function ( xhr ) {\n                        xhr.setRequestHeader( 'X-WP-Nonce', WP_API_Settings.nonce );\n                    },\n                    data:{}\n                } ).done( function ( response ) {\n                    $btn.removeClass('btn-following');\n                }).fail(function(){\n                    Hametuha.alert('フォローを解除できませんでした', true);\n                }).always(function(){\n                   $btn.removeClass('btn-follow--loading');\n                });\n            }, true);\n        }else{\n            $btn.addClass('btn-follow--loading');\n            $.ajax( {\n                url: endpoint,\n                method: 'POST',\n                beforeSend: function ( xhr ) {\n                    xhr.setRequestHeader( 'X-WP-Nonce', WP_API_Settings.nonce );\n                },\n                data:{}\n            } ).done( function ( response ) {\n                $btn.addClass('btn-following');\n            }).fail(function(){\n               Hametuha.alert('フォローに失敗しました。すでにフォロー済みか、サーバが混み合っています。', true);\n            }).always(function(){\n                $btn.removeClass('btn-follow--loading');\n            });\n        }\n\n    });\n\n\n})(jQuery);\n"],"sourceRoot":"/source/"}