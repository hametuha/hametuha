{"version":3,"sources":["hashboard/notifications.js"],"names":["$","Vue","el","template","data","type","curPage","total","loading","notifications","props","String","required","beforeMount","this","$el","getAttribute","mounted","fetch","methods","page","self","hbRest","paged","done","response","status","request","parseInt","getResponseHeader","fail","hbRestError","always","pagination","number","jQuery"],"mappings":";;;CAIA,SAAUA,GAER,YAEA,IAAIC,MACFC,GAAI,0BACJC,SAAU,0cAQVC,MACEC,KAAM,GACNC,QAAS,EACTC,MAAO,EACPC,SAAS,EACTC,kBAEFC,OACEL,MACEA,KAAMM,OACNC,UAAU,IAGdC,YAAa,WACXC,KAAKT,KAAOS,KAAKC,IAAIC,aAAa,cAEpCC,QAAS,WACPH,KAAKN,SAAU,EACfM,KAAKI,MAAM,IAGbC,SACED,MAAO,SAASE,GACd,GAAIC,GAAOP,IACXO,GAAKb,SAAU,EACfR,EAAEsB,OAAO,MAAO,6BAA+BR,KAAKT,MAAOkB,MAAOH,IAAOI,KAAK,SAASC,EAAUC,EAAQC,GACvGN,EAAKZ,cAAgBgB,EACrBJ,EAAKf,QAAUc,EACfC,EAAKd,MAAQqB,SAASD,EAAQE,kBAAkB,mBAAoB,MACnEC,KAAK9B,EAAE+B,eAAeC,OAAO,WAC9BX,EAAKb,SAAU,KAInByB,WAAY,SAASC,GACnBpB,KAAKI,MAAMgB,QAKhBC","file":"../../hashboard/notifications.js","sourcesContent":["/*!\n * wpdeps=hb-components-loading,hashboard-rest,hb-components-pagination\n */\n\n(function($){\n\n  'use strict';\n\n  new Vue({\n    el: '#hametuha-notifications',\n    template: '<div class=\"hametuha-hb-notifications\" data-loading-wrapper=\"true\">' +\n      '<div v-if=\"total\"><p class=\"text-muted text-right\">{{curPage}} / {{total}}ページ</p></div>' +\n      '<div class=\"notification-loop-container\">' +\n        '<div class=\"notification-loop\" v-for=\"n in notifications\" v-html=\"n.rendered\"></div>' +\n      '</div>' +\n      '<hb-pagination v-if=\"total\" :total=\"total\" :current=\"curPage\" @pageChanged=\"pagination\"></hb-pagination>' +\n      '<hb-loading :loading=\"loading\" title=\"読み込み中……\"></hb-loading>' +\n    '</div>',\n    data: {\n      type: '',\n      curPage: 1,\n      total: 0,\n      loading: false,\n      notifications: []\n    },\n    props: {\n      type: {\n        type: String,\n        required: true\n      }\n    },\n    beforeMount: function(){\n      this.type = this.$el.getAttribute('data-type');\n    },\n    mounted: function () {\n      this.loading = true;\n      this.fetch(1);\n    },\n\n    methods: {\n      fetch: function(page){\n        var self = this;\n        self.loading = true;\n        $.hbRest('GET', 'hametuha/v1/notifications/' + this.type, {paged: page}).done(function(response, status, request){\n          self.notifications = response;\n          self.curPage = page;\n          self.total = parseInt(request.getResponseHeader('X-WP-TotalPages'), 10);\n        }).fail($.hbRestError()).always(function(){\n          self.loading = false;\n        });\n      },\n\n      pagination: function(number){\n        this.fetch(number);\n      }\n    }\n  });\n\n})(jQuery);\n\n"]}