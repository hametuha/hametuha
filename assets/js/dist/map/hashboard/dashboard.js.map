{"version":3,"sources":["hashboard/dashboard.js"],"names":["$","Vue","component","data","limit","notifications","loading","props","link","type","String","required","template","mounted","self","this","hbRest","paged","done","response","status","request","store","i","length","push","fail","hbRestError","always","document","on","e","preventDefault","Hashboard","toast","message","jQuery"],"mappings":";;;CAMA,SAAWA,GAETC,IAAIC,UAAU,8BAA+B,CAC3CC,KAAM,WACJ,MAAO,CACLC,MAAO,EACPC,cAAe,GACfC,SAAS,IAGbC,MAAO,CACLC,KAAM,CACJC,KAAMC,OACNC,UAAU,IAGdC,SAAU,6SAQVC,QAAS,WACP,IAAIC,EAAOC,KACXD,EAAKR,SAAU,EACfN,EAAEgB,OAAO,MAAO,gCAAiC,CAACC,MAAO,IAAIC,KAAK,SAASC,EAAUC,EAAQC,GAE3F,IADA,IAAIC,EAAQ,GACJC,EAAI,EAAGA,EAAIJ,EAASK,SAC1BF,EAAMG,KAAKN,EAASI,MACjBA,EAAE,GAAKT,EAAKV,QAFmBmB,KAMpCT,EAAKT,cAAgBiB,IACpBI,KAAK1B,EAAE2B,eAAeC,OAAO,WAC9Bd,EAAKR,SAAU,OAMrBN,EAAE6B,UAAUC,GAAG,QAAS,oBAAqB,SAASC,GACpDA,EAAEC,iBACFhC,EAAEgB,OAAO,OAAQ,8BAA8BE,KAAK,SAASC,GAC3Dc,UAAUC,MAAMf,EAASgB,WACxBT,KAAK1B,EAAE2B,eAAeC,OAAO,gBA/CpC,CAoDGQ","file":"../../hashboard/dashboard.js","sourcesContent":["/*!\n * wpdeps=hb-components-post-list,hb-plugins-toast\n */\n\n/*global Vue: true*/\n\n(function ($) {\n\n  Vue.component('hametuha-notification-block', {\n    data: function(){\n      return {\n        limit: 3,\n        notifications: [],\n        loading: false\n      };\n    },\n    props: {\n      link: {\n        type: String,\n        required: true\n      }\n    },\n    template: '<div class=\"hb-post-list\">' +\n      '<div class=\"hb-post-list-list\">' +\n        '<div v-for=\"n in notifications\" class=\"notification-loop notification-loop-small\" v-html=\"n.rendered\"></div>' +\n      '</div>' +\n      '<a :href=\"link\" class=\"btn btn-block btn-secondary\">もっと読む</a>' +\n      '<hb-loading title=\"読み込み中……\" :loading=\"loading\"></hb-loading>' +\n    '</div>',\n\n    mounted: function(){\n      var self = this;\n      self.loading = true;\n      $.hbRest('GET', 'hametuha/v1/notifications/all', {paged: 1}).done(function(response, status, request){\n        var store = [];\n        for(var i = 0; i < response.length; i++){\n          store.push(response[i]);\n          if(i+1 >= self.limit){\n            break;\n          }\n        }\n        self.notifications = store;\n      }).fail($.hbRestError()).always(function(){\n        self.loading = false;\n      });\n    }\n  });\n\n  // Slack button\n  $(document).on('click', '#slack-invitation', function(e){\n    e.preventDefault();\n    $.hbRest('POST', 'hameslack/v1/invitation/me').done(function(response){\n      Hashboard.toast(response.message);\n    }).fail($.hbRestError()).always(function(){\n\n    });\n  });\n\n})(jQuery);\n"]}