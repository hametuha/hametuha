{"version":3,"sources":["social.js"],"names":["$","document","on","e","url","this","attr","category","action","label","value","Hametuha","ga","eventOutbound","event","window","fbAsyncInit","FB","init","appId","xfbml","version","actions","comment.create","comment.remove","edge.create","edge.remove","message.send","each","prop","Event","subscribe","href","hasOwnProperty","hitType","socialNetwork","socialAction","socialTarget","replace","err","d","s","id","js","fjs","getElementsByTagName","getElementById","createElement","async","src","parentNode","insertBefore","twttr","t","_e","ready","f","push","index","key","events","bind","location","pathname","___gcfg","lang","defer","plusOneCallBack","params","timer","path","hitCallback","clearTimeout","setTimeout","preventDefault","jQuery"],"mappings":"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","file":"../social.js","sourcesContent":["/**\n * bodyタグの開始直後に読み込まれる\n */\n\n/*global FB: false*/\n/*global twttr: false*/\n/*global Hametuha: true*/\n\n\n(function ($) {\n\n  \"use strict\";\n\n  //\n  // アウトバウンドを記録\n  // -------------------\n  //\n  $(document).on('click', 'a[data-outbound]', function (e) {\n    var url      = $(this).attr('href'),\n        category = $(this).attr('data-outbound'),\n        action   = $(this).attr('data-action'),\n        label    = $(this).attr('data-label'),\n        value    = $(this).attr('data-value') || 1;\n    if (category && action && label) {\n      Hametuha.ga.eventOutbound(event, url, category, action, label, value);\n    }\n  });\n\n\n  //\n  // Facebook\n  // ------------------\n  //\n  window.fbAsyncInit = function () {\n    // 初期化\n    FB.init({\n      appId  : '196054397143922',\n      xfbml  : true,\n      version: 'v2.7'\n    });\n    // イベントを監視\n    var actions = {\n      'comment.create': 'comment',\n      'comment.remove': 'uncomment',\n      'edge.create': 'like',\n      'edge.remove': 'dislike',\n      'message.send': 'message'\n    };\n    $.each(actions, function (prop, action) {\n      FB.Event.subscribe( prop, function (url) {\n        var href = url.hasOwnProperty('href') ? url.href : url;\n        try {\n          ga('send', {\n            hitType      : 'social',\n            socialNetwork: 'facebook',\n            socialAction : action,\n            socialTarget : href.replace(/^https?:\\/\\/hametuha\\.(com|info)/, '')\n          });\n        } catch (err) {\n        }\n      });\n    });\n  };\n  (function (d, s, id) {\n    var js, fjs = d.getElementsByTagName(s)[0];\n    if (d.getElementById(id)) return;\n    js = d.createElement(s);\n    js.id = id;\n    js.async = true;\n    js.src = \"//connect.facebook.net/ja_JP/sdk.js\";\n    fjs.parentNode.insertBefore(js, fjs);\n  }(document, 'script', 'facebook-jssdk'));\n\n\n\n  //\n  // Twitter\n  // ---------------\n  //\n  window.twttr = (function (d, s, id) {\n    var js, fjs = d.getElementsByTagName(s)[0],\n        t       = window.twttr || {};\n    if (d.getElementById(id)) return;\n    js = d.createElement(s);\n    js.id = id;\n    js.src = \"https://platform.twitter.com/widgets.js\";\n    js.async = true;\n    fjs.parentNode.insertBefore(js, fjs);\n\n    t._e = [];\n    t.ready = function (f) {\n      t._e.push(f);\n    };\n\n    return t;\n  }(document, \"script\", \"twitter-wjs\"));\n\n  // つぶやきを集計\n  twttr.ready(function (twttr) {\n    $.each(['follow', 'tweet', 'retweet', 'click', 'favorite'], function (index, key) {\n      twttr.events.bind(key, function (event) {\n        try {\n          ga('send', {\n            hitType      : 'social',\n            socialNetwork: 'twitter',\n            socialAction : key,\n            socialTarget : window.location.pathname\n          });\n        } catch (err) {\n          // Do nothing\n        }\n      });\n    });\n  });\n\n\n\n  //\n  // はてな\n  // ---------------\n  //\n  (function (d, s, id) {\n    var js, fjs = d.getElementsByTagName(s)[0];\n    if (d.getElementById(id)) return;\n    js = d.createElement(s);\n    js.id = id;\n    js.src = \"https://b.st-hatena.com/js/bookmark_button.js\";\n    js.async = true;\n    fjs.parentNode.insertBefore(js, fjs);\n  }(document, \"script\", \"hatena-js\"));\n\n\n\n  //\n  // Google\n  // ---------------\n  //\n  (function (d, s, id) {\n    var js, fjs = d.getElementsByTagName(s)[0];\n    if (d.getElementById(id)) return;\n    window.___gcfg = {\n      lang: 'ja'\n    };\n    js = d.createElement(s);\n    js.id = id;\n    js.src = \"https://apis.google.com/js/platform.js\";\n    js.async = true;\n    js.defer = true;\n    fjs.parentNode.insertBefore(js, fjs);\n  }(document, \"script\", \"google-plus-js\"));\n  // コールバック\n  window.plusOneCallBack = function(params){\n    var status;\n  };\n\n\n\n  //\n  // LINE\n  // ---------------\n  //\n  $(document).on('click', '.share-line', function(e){\n    try{\n      var href = $(this).attr('href');\n      var path = $(this).attr('data-path');\n      var timer;\n      ga('send', {\n        hitType      : 'social',\n        socialNetwork: 'line',\n        socialAction : 'send',\n        socialTarget : path.replace(/^https?:\\/\\/hametuha\\.(com|info)/, ''),\n        hitCallback: function(){\n          clearTimeout(timer);\n          window.location.href = href;\n        }\n      });\n      timer = setTimeout(function(){\n        window.location.href = href;\n      }, 1000);\n      e.preventDefault();\n    }catch (err){\n      // Do nothing.\n    }\n  });\n\n})(jQuery);\n"]}