{"version":3,"sources":["social.js"],"names":["$","d","s","id","js","fjs","document","on","e","url","this","attr","category","action","label","value","Hametuha","ga","eventOutbound","event","window","fbAsyncInit","FB","init","appId","xfbml","version","each","comment.create","comment.remove","edge.create","edge.remove","message.send","prop","Event","subscribe","href","hasOwnProperty","hitType","socialNetwork","socialAction","socialTarget","replace","err","getElementsByTagName","getElementById","createElement","async","src","parentNode","insertBefore","twttr","t","_e","ready","f","push","index","key","events","bind","location","pathname","___gcfg","lang","defer","plusOneCallBack","params","timer","path","hitCallback","clearTimeout","setTimeout","preventDefault","jQuery"],"mappings":"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","file":"../social.js","sourcesContent":["/**\n * bodyタグの開始直後に読み込まれる\n */\n\n/*global FB: false*/\n/*global twttr: false*/\n/*global Hametuha: true*/\n\n\n(function ($) {\n\n  \"use strict\";\n\n  //\n  // アウトバウンドを記録\n  // -------------------\n  //\n  $(document).on('click', 'a[data-outbound]', function (e) {\n    var url      = $(this).attr('href'),\n        category = $(this).attr('data-outbound'),\n        action   = $(this).attr('data-action'),\n        label    = $(this).attr('data-label'),\n        value    = $(this).attr('data-value') || 1;\n    if (category && action && label) {\n      Hametuha.ga.eventOutbound(event, url, category, action, label, value);\n    }\n  });\n\n\n  //\n  // Facebook\n  // ------------------\n  //\n  window.fbAsyncInit = function () {\n    // 初期化\n    FB.init({\n      appId  : '196054397143922',\n      xfbml  : true,\n      version: 'v2.7'\n    });\n    // イベントを監視\n    var actions = {\n      'comment.create': 'comment',\n      'comment.remove': 'uncomment',\n      'edge.create': 'like',\n      'edge.remove': 'dislike',\n      'message.send': 'message'\n    };\n    $.each(actions, function (prop, action) {\n      FB.Event.subscribe( prop, function (url) {\n        var href = url.hasOwnProperty('href') ? url.href : url;\n        try {\n          ga('send', {\n            hitType      : 'social',\n            socialNetwork: 'facebook',\n            socialAction : action,\n            socialTarget : href.replace(/^https?:\\/\\/hametuha\\.(com|info)/, '')\n          });\n        } catch (err) {\n        }\n      });\n    });\n  };\n  (function (d, s, id) {\n    var js, fjs = d.getElementsByTagName(s)[0];\n    if (d.getElementById(id)) return;\n    js = d.createElement(s);\n    js.id = id;\n    js.async = true;\n    js.src = \"//connect.facebook.net/ja_JP/sdk.js\";\n    fjs.parentNode.insertBefore(js, fjs);\n  }(document, 'script', 'facebook-jssdk'));\n\n\n\n  //\n  // Twitter\n  // ---------------\n  //\n  window.twttr = (function (d, s, id) {\n    var js, fjs = d.getElementsByTagName(s)[0],\n        t       = window.twttr || {};\n    if (d.getElementById(id)) return;\n    js = d.createElement(s);\n    js.id = id;\n    js.src = \"https://platform.twitter.com/widgets.js\";\n    js.async = true;\n    fjs.parentNode.insertBefore(js, fjs);\n\n    t._e = [];\n    t.ready = function (f) {\n      t._e.push(f);\n    };\n\n    return t;\n  }(document, \"script\", \"twitter-wjs\"));\n\n  // つぶやきを集計\n  twttr.ready(function (twttr) {\n    $.each(['follow', 'tweet', 'retweet', 'click', 'favorite'], function (index, key) {\n      twttr.events.bind(key, function (event) {\n        try {\n          ga('send', {\n            hitType      : 'social',\n            socialNetwork: 'twitter',\n            socialAction : key,\n            socialTarget : window.location.pathname\n          });\n        } catch (err) {\n          // Do nothing\n        }\n      });\n    });\n  });\n\n\n\n  //\n  // はてな\n  // ---------------\n  //\n  (function (d, s, id) {\n    var js, fjs = d.getElementsByTagName(s)[0];\n    if (d.getElementById(id)) return;\n    js = d.createElement(s);\n    js.id = id;\n    js.src = \"https://b.st-hatena.com/js/bookmark_button.js\";\n    js.async = true;\n    fjs.parentNode.insertBefore(js, fjs);\n  }(document, \"script\", \"hatena-js\"));\n\n\n\n  //\n  // Google\n  // ---------------\n  //\n  (function (d, s, id) {\n    var js, fjs = d.getElementsByTagName(s)[0];\n    if (d.getElementById(id)) return;\n    window.___gcfg = {\n      lang: 'ja'\n    };\n    js = d.createElement(s);\n    js.id = id;\n    js.src = \"https://apis.google.com/js/platform.js\";\n    js.async = true;\n    js.defer = true;\n    fjs.parentNode.insertBefore(js, fjs);\n  }(document, \"script\", \"google-plus-js\"));\n  // コールバック\n  window.plusOneCallBack = function(params){\n    var status;\n  };\n\n\n\n  //\n  // LINE\n  // ---------------\n  //\n  $(document).on('click', '.share-line', function(e){\n    try{\n      var href = $(this).attr('href');\n      var path = $(this).attr('data-path');\n      var timer;\n      ga('send', {\n        hitType      : 'social',\n        socialNetwork: 'line',\n        socialAction : 'send',\n        socialTarget : path.replace(/^https?:\\/\\/hametuha\\.(com|info)/, ''),\n        hitCallback: function(){\n          clearTimeout(timer);\n          window.location.href = href;\n        }\n      });\n      timer = setTimeout(function(){\n        window.location.href = href;\n      }, 1000);\n      e.preventDefault();\n    }catch (err){\n      // Do nothing.\n    }\n  });\n\n})(jQuery);\n"]}