{"version":3,"sources":["profile-helper.js"],"names":["jQuery","document","ready","$","click","e","preventDefault","loader","this","next","input","prev","addClass","post","HametuhaProfile","endpoint","_wpnonce","nonce","action","usernameCheck","user_login","val","result","removeClass","valid","remove","before","message","fadeIn","submit","match","length","startTime","timer","setInterval","clearInterval","window","parent","location","href","attr","text","confirm","targetID","parseInt","replace","deleteFavorite","fav_id","status","fadeOut","alert","blur","css","insertAfter","p","setTimeout"],"mappings":"AAMAA,OAAOC,UAAUC,MAAM,SAASC,GAE5B,YAwCH,IArCAA,EAAE,yBAAyBC,MAAM,SAASC,GACzCA,EAAEC,gBACF,IAAIC,GAASJ,EAAEK,MAAMC,KAAK,OACtBC,EAAQP,EAAEK,MAAMG,KAAK,QACzBJ,GAAOK,SAAS,WAChBT,EAAEU,KAAKC,gBAAgBC,UACtBC,SAAUF,gBAAgBG,MAC1BC,OAAQJ,gBAAgBK,cACxBC,WAAYjB,EAAEK,MAAMG,KAAK,SAASU,OAChC,SAASC,GACXf,EAAOgB,YAAY,WAChBD,EAAOE,MACTd,EAAMa,YAAY,SAElBb,EAAME,SAAS,SAEhBT,EAAE,iBAAiBQ,KAAK,aAAac,SACrCtB,EAAE,iBAAiBuB,OAAO,sBAAwBJ,EAAOE,MAAQ,UAAY,SAAW,2BAA6BF,EAAOK,QAAU,QACtIxB,EAAE,iBAAiBQ,KAAK,aAAaiB,aAKvCzB,EAAE,iBAAiB0B,OAAO,SAASxB,GAE9BF,EAAE,0BAA0BkB,MAAMS,MAAM,yBAC3C3B,EAAE,0BAA0BS,SAAS,SAClCT,EAAEK,MAAMG,KAAK,aAAaoB,OAAS,GACrC5B,EAAEK,MAAMG,KAAK,aAAac,SAE3BtB,EAAEK,MAAMkB,OAAO,kFACfvB,EAAEK,MAAMG,KAAK,aAAaiB,SAC1BvB,EAAEC,oBAKDH,EAAE,2BAA2B4B,OAAS,EACxC,GAAIC,GAAY,EACZC,EAAQC,YAAY,WACP,GAAbF,GACFG,cAAcF,GACdG,OAAOC,OAAOC,SAASC,KAAOpC,EAAE,2BAA2BM,KAAK,KAAK+B,KAAK,UAE1ER,IACA7B,EAAE,2BAA2BsC,KAAKT,KAEjC,IAIJ7B,GAAE,eAAeC,MAAM,SAASC,GAE/B,GADAA,EAAEC,iBACE8B,OAAOM,QAAQ,4BAA6B,CAC/C,GAAIC,GAAWC,SAASzC,EAAEK,MAAMgC,KAAK,MAAMK,QAAQ,cAAe,IAClE1C,GAAEK,MAAMG,KAAK,WAAWC,SAAS,WACjCT,EAAEU,KAAKC,gBAAgBC,UACtBC,SAAUF,gBAAgBG,MAC1BC,OAAQJ,gBAAgBgC,eACxBC,OAAQJ,GACN,SAASrB,GACRA,EAAO0B,OACT7C,EAAE,WAAawC,GAAUM,QAAQ,OAAQ,SAAS5C,GACjDF,EAAEK,MAAMiB,YAGTtB,EAAE,WAAawC,EAAW,YAAYpB,YAAY,WAClDa,OAAOc,MAAM5B,EAAOK,eAQxBxB,EAAE,8BAA8BgD,KAAK,SAAS9C,GAC7C,GAAIsB,GAAU,IACXxB,GAAEK,MAAMa,MAAMU,OAAS,EACzBJ,EAAU,kBACDxB,EAAEK,MAAMa,MAAMS,MAAM,gBAC7BH,EAAU,yBAERA,GACFxB,EAAE,WAAWsC,KAAKd,GAASf,SAAS,iBAAiBA,SAAS,SAASwC,IAAI,UAAW,QAAQC,YAAYlD,EAAEK,OAAOoB,OAAO,SAAU,WACnI,CAAA,GAAI0B,GAAI9C,IACI+C,YAAW,WACtBpD,EAAEmD,GAAGL,QAAQ,SAAU,WACtB9C,EAAEK,MAAMiB,YAEP","file":"profile-helper.js","sourcesContent":["/*! \n * プロフィール編集画面で読み込まれる関数\n */\n\n/* global HametuhaProfile:true */\n\njQuery(document).ready(function($){\n\n    \"use strict\";\n\t\n\t//ユーザー名が使用可能かチェックする\n\t$('#check-username-valid').click(function(e){\n\t\te.preventDefault();\n\t\tvar loader = $(this).next('img');\n\t\tvar input = $(this).prev('input');\n\t\tloader.addClass('loading');\n\t\t$.post(HametuhaProfile.endpoint,{\n\t\t\t_wpnonce: HametuhaProfile.nonce,\n\t\t\taction: HametuhaProfile.usernameCheck,\n\t\t\tuser_login: $(this).prev('input').val()\n\t\t}, function(result){\n\t\t\tloader.removeClass('loading');\n\t\t\tif(result.valid){\n\t\t\t\tinput.removeClass('error');\n\t\t\t}else{\n\t\t\t\tinput.addClass('error');\n\t\t\t}\n\t\t\t$('#your-profile').prev('p.message').remove();\n\t\t\t$('#your-profile').before('<p class=\"message ' + (result.valid ? 'success' : 'error') + '\" style=\"display:none;\">' + result.message + '</p>');\n\t\t\t$('#your-profile').prev('p.message').fadeIn();\n\t\t});\n\t});\n\t\n\t//フォームのバリデーション\n\t$('#your-profile').submit(function(e){\n\t\t//ユーザー名\n\t\tif(!$('input[name=user_login]').val().match(/^[0-9a-zA-Z.\\-@_]+$/)){\n\t\t\t$('input[name=user_login]').addClass('error');\n\t\t\tif($(this).prev('p.message').length > 0){\n\t\t\t\t$(this).prev('p.message').remove();\n\t\t\t}\n\t\t\t$(this).before('<p class=\"message error\" style=\"display:none;\">ユーザー名に使用できるのは半角英数と_.-@のみです。</p>');\n\t\t\t$(this).prev('p.message').fadeIn();\n\t\t\te.preventDefault();\n\t\t}\n\t});\n\t\n\t//リダイレクト\n\tif($('#login-success-redirect').length > 0){\n\t\tvar startTime = 5;\n\t\tvar timer = setInterval(function(){\n\t\t\tif(startTime <= 0){\n\t\t\t\tclearInterval(timer);\n\t\t\t\twindow.parent.location.href = $('#login-success-redirect').next('a').attr('href');\n\t\t\t}else{\n\t\t\t\tstartTime--;\n\t\t\t\t$('#login-success-redirect').text(startTime);\n\t\t\t}\n\t\t}, 1000);\n\t}\n\t\n\t//お気に入りの削除\n\t$('.delete-fav').click(function(e){\n\t\te.preventDefault();\n\t\tif( window.confirm('このお気に入りフレーズを削除してよろしいですか？') ){\n\t\t\tvar targetID = parseInt($(this).attr('id').replace(/delete_fav_/, ''));\n\t\t\t$(this).prev('.loader').addClass('loading');\n\t\t\t$.post(HametuhaProfile.endpoint,{\n\t\t\t\t_wpnonce: HametuhaProfile.nonce,\n\t\t\t\taction: HametuhaProfile.deleteFavorite,\n\t\t\t\tfav_id: targetID\n\t\t\t}, function(result){\n\t\t\t\tif(result.status){\n\t\t\t\t\t$('#li-fav-' + targetID).fadeOut('slow', function(e){\n\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\t$('#li-fav-' + targetID + ' .loader').removeClass('loading');\n\t\t\t\t\twindow.alert(result.message);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t});\n\t\t}\n\t});\n\t\n\t//筆名読みがな\n\t$('input#last_name[type=text]').blur(function(e){\n\t\tvar message = null;\n\t\tif($(this).val().length < 1){\n\t\t\tmessage = '筆名の読みが入力されていません';\n\t\t}else if(!$(this).val().match(/^[あ-ん 　]+$/)){\n\t\t\tmessage = '筆名の読みに使用できるのはひらがなだけです';\n\t\t}\n\t\tif(message){\n\t\t\t$('<p></p>').text(message).addClass('small-message').addClass('error').css('display', 'none').insertAfter($(this)).fadeIn('normal', function(){\n\t\t\t\tvar p = this;\n\t\t\t\tvar timer = setTimeout(function(){\n\t\t\t\t\t$(p).fadeOut('normal', function(){\n\t\t\t\t\t\t$(this).remove();\n\t\t\t\t\t});\n\t\t\t\t}, 3000);\n\t\t\t});\n\t\t}\n\t});\n});"],"sourceRoot":"/source/"}