{"version":3,"sources":["admin/announcement.js"],"names":["jQuery","document","ready","$","length","datetimepicker","dateFormat","timeFormat","changeMonth","changeYear","timeOnlyTitle","timeText","hourText","minuteText","secondText","currentText","closeText","dayNamesMin","monthNamesShort","showMonthAfterYear","click","e","this","val","fadeOut","fadeIn","i","l","css","id","each","index","elt","attr","defaultLatLng","map","marker","corrds","geocoder","google","maps","Geocoder","get","latlng","split","lat","lng","match","LatLng","set","latLng","toLatLng","address","callback","geocode","results","status","GeocoderStatus","OK","setCenter","geometry","location","setPosition","Map","getElementById","zoom","center","mapTypeId","MapTypeId","ROADMAP","Marker","position","draggable","msg","string","result","window","alert","preventDefault","text"],"mappings":"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","file":"../../admin/announcement.js","sourcesContent":["/*!\n * 告知ページのヘルパースクリプト\n *\n *\n */\n\n/*global google:true */\n\njQuery(document).ready(function ($) {\n\n    'use strict';\n\n    //TimePickerの設定\n    if ($('.timepicker').length > 0) {\n        $('.timepicker').datetimepicker({\n            dateFormat        : \"yy-mm-dd\",\n            timeFormat        : \"hh:mm:00\",\n            changeMonth       : true,\n            changeYear        : true,\n            timeOnlyTitle     : '時刻の指定',\n            timeText          : '時刻',\n            hourText          : '時',\n            minuteText        : '分',\n            secondText        : '秒',\n            currentText       : '現在',\n            closeText         : '閉じる',\n            dayNamesMin       : ['日', '月', '火', '水', '木', '金', '土'],\n            monthNamesShort   : ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],\n            showMonthAfterYear: true\n        });\n    }\n    //管理画面のラジオボタントグル\n    if ($('input[name=commit_type]').length > 0) {\n        $('input[name=commit_type]').click(function (e) {\n            if ($(this).val() === '0') {\n                $('#commit-conditions').fadeOut();\n            } else {\n                $('#commit-conditions').fadeIn();\n            }\n        });\n    }\n    if ($('input[name=commit_type]').length > 0) {\n        $('input[name=commit_type]').click(function (e) {\n            for (var i = 0, l = $('input[name=commit_type]').length; i < l; i++) {\n                if ($(this).val() != i + 1) {\n                    $('#commit_' + (i + 1)).css('display', 'none');\n                } else {\n                    $('#commit_' + (i + 1)).fadeIn();\n                }\n            }\n        });\n    }\n    if ($('input[name=commit_post_type]').length > 0) {\n        $('input[name=commit_post_type]').click(function (e) {\n            var id = 'commit_cat_' + $(this).val();\n            $('p[id^=commit_cat_]').each(function (index, elt) {\n                if ($(elt).attr('id') == id) {\n                    $(elt).fadeIn();\n                } else {\n                    $(elt).css('display', 'none');\n                }\n            });\n        });\n    }\n\n    //Google Map用のユーティリティクラス\n    var defaultLatLng,\n        map,\n        marker,\n        corrds = {\n\n            geocoder: new google.maps.Geocoder(),\n\n            /**\n             * @return {LatLng}\n             */\n            get: function () {\n                var latlng = $('input[name=announcement_latlng]').val().split(':');\n                if (latlng.length > 1) {\n                    var lat = latlng[0];\n                    var lng = latlng[1];\n                    if (lat.match(/^[0-9\\-\\.]+$/) && lng.match(/^[0-9\\-\\.]+$/)) {\n                        return new google.maps.LatLng(lat, lng);\n                    } else {\n                        return null;\n                    }\n                } else {\n                    return null;\n                }\n            },\n\n            /**\n             * Set latlng\n             *\n             * @param {google.maps.LatLng} latLng\n             * @return {undefined}\n             */\n            set: function (latLng) {\n                $('input[name=announcement_latlng]').val(latLng.lat() + ':' + latLng.lng());\n            },\n\n            toLatLng: function (address, callback) {\n                this.geocoder.geocode({'address': address}, function (results, status) {\n                    if (status == google.maps.GeocoderStatus.OK) {\n                        map.setCenter(results[0].geometry.location);\n                        marker.setPosition(results[0].geometry.location);\n                        corrds.set(results[0].geometry.location);\n                    } else {\n                        callback(\"住所の取得に失敗しました: \", status);\n                    }\n                });\n            }\n        };\n\n    // Google Mapの描画（管理画面）\n    if ($('#announcement_map').length > 0) {\n        defaultLatLng = new google.maps.LatLng(35.671435, 139.720863);\n        map = new google.maps.Map(document.getElementById(\"announcement_map\"), {\n            zoom     : 15,\n            center   : defaultLatLng,\n            mapTypeId: google.maps.MapTypeId.ROADMAP\n        });\n        //マーカーを落とす\n        marker = new google.maps.Marker({\n            position : defaultLatLng,\n            map      : map,\n            draggable: false\n        });\n        var msg = function (string, result) {\n            window.alert(string + ': ' + result);\n        };\n        //空じゃなかったらマーカーを移動\n        if ($('#announcement_address').val().length > 0) {\n            corrds.toLatLng($('#announcement_address').val(), msg);\n        }\n        //ボタンをクリックしたとき、アイコンを移動する\n        $('#announcement_address_search1').click(function (e) {\n            e.preventDefault();\n            corrds.toLatLng($('#announcement_address').val(), msg);\n        });\n    }\n\n    // Google Mapの描画（公開画面）\n    if ($('#gmap-announcement').length > 0) {\n        var address = $('#gmap-announcement').text();\n        $('#gmap-announcement').text('');\n        defaultLatLng = new google.maps.LatLng(35.671435, 139.720863);\n        //地図を描画\n        map = new google.maps.Map(document.getElementById(\"gmap-announcement\"), {\n            zoom     : 15,\n            center   : defaultLatLng,\n            mapTypeId: google.maps.MapTypeId.ROADMAP\n        });\n        //マーカーを落とす\n        marker = new google.maps.Marker({\n            position : defaultLatLng,\n            map      : map,\n            draggable: false\n        });\n        //座標を移動\n        corrds.toLatLng(address);\n    }\n});"]}