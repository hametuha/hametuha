{"version":3,"sources":["admin/announcement.js"],"names":["jQuery","document","ready","$","length","datetimepicker","dateFormat","timeFormat","changeMonth","changeYear","timeOnlyTitle","timeText","hourText","minuteText","secondText","currentText","closeText","dayNamesMin","monthNamesShort","showMonthAfterYear","click","this","val","fadeOut","fadeIn","i","l","css","id","each","index","elt","attr","defaultLatLng","map","marker","corrds","geocoder","google","maps","Geocoder","get","latlng","split","lat","lng","match","LatLng","set","latLng","toLatLng","address","callback","geocode","results","status","GeocoderStatus","OK","setCenter","geometry","location","setPosition","Map","getElementById","zoom","center","mapTypeId","MapTypeId","ROADMAP","Marker","position","draggable","msg","string","result","window","alert","e","preventDefault","text"],"mappings":"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","file":"admin/announcement.js","sourcesContent":["/*!\n * 告知ページのヘルパースクリプト\n *\n *\n */\n\n/*global google:true */\n\njQuery(document).ready(function ($) {\n\n    'use strict';\n\n    //TimePickerの設定\n    if ($('.timepicker').length > 0) {\n        $('.timepicker').datetimepicker({\n            dateFormat        : \"yy-mm-dd\",\n            timeFormat        : \"hh:mm:00\",\n            changeMonth       : true,\n            changeYear        : true,\n            timeOnlyTitle     : '時刻の指定',\n            timeText          : '時刻',\n            hourText          : '時',\n            minuteText        : '分',\n            secondText        : '秒',\n            currentText       : '現在',\n            closeText         : '閉じる',\n            dayNamesMin       : ['日', '月', '火', '水', '木', '金', '土'],\n            monthNamesShort   : ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],\n            showMonthAfterYear: true\n        });\n    }\n    //管理画面のラジオボタントグル\n    if ($('input[name=commit_type]').length > 0) {\n        $('input[name=commit_type]').click(function (e) {\n            if ($(this).val() === '0') {\n                $('#commit-conditions').fadeOut();\n            } else {\n                $('#commit-conditions').fadeIn();\n            }\n        });\n    }\n    if ($('input[name=commit_type]').length > 0) {\n        $('input[name=commit_type]').click(function (e) {\n            for ( var i = 0, l = $('input[name=commit_type]').length; i < l; i++) {\n                if ($(this).val() != i + 1) {\n                    $('#commit_' + (i + 1)).css('display', 'none');\n                } else {\n                    $('#commit_' + (i + 1)).fadeIn();\n                }\n            }\n        });\n    }\n    if ($('input[name=commit_post_type]').length > 0) {\n        $('input[name=commit_post_type]').click(function (e) {\n            var id = 'commit_cat_' + $(this).val();\n            $('p[id^=commit_cat_]').each(function (index, elt) {\n                if ($(elt).attr('id') == id) {\n                    $(elt).fadeIn();\n                } else {\n                    $(elt).css('display', 'none');\n                }\n            });\n        });\n    }\n\n    //Google Map用のユーティリティクラス\n    var defaultLatLng,\n        map,\n        marker,\n        corrds = {\n\n        geocoder: new google.maps.Geocoder(),\n\n        /**\n         * @return {LatLng}\n         */\n        get: function () {\n            var latlng = $('input[name=announcement_latlng]').val().split(':');\n            if (latlng.length > 1) {\n                var lat = latlng[0];\n                var lng = latlng[1];\n                if (lat.match(/^[0-9\\-\\.]+$/) && lng.match(/^[0-9\\-\\.]+$/)) {\n                    return new google.maps.LatLng(lat, lng);\n                } else {\n                    return null;\n                }\n            } else {\n                return null;\n            }\n        },\n\n        /**\n         * @param {google.maps.LatLng}\n         * @return {undefined}\n         */\n        set: function (latLng) {\n            $('input[name=announcement_latlng]').val(latLng.lat() + ':' + latLng.lng());\n        },\n\n        toLatLng: function (address, callback) {\n            this.geocoder.geocode({'address': address}, function (results, status) {\n                if (status == google.maps.GeocoderStatus.OK) {\n                    map.setCenter(results[0].geometry.location);\n                    marker.setPosition(results[0].geometry.location);\n                    corrds.set(results[0].geometry.location);\n                } else {\n                    callback(\"住所の取得に失敗しました: \", status);\n                }\n            });\n        }\n    };\n\n    // Google Mapの描画（管理画面）\n    if ($('#announcement_map').length > 0) {\n        defaultLatLng = new google.maps.LatLng(35.671435, 139.720863);\n        map = new google.maps.Map(document.getElementById(\"announcement_map\"), {\n            zoom     : 15,\n            center   : defaultLatLng,\n            mapTypeId: google.maps.MapTypeId.ROADMAP\n        });\n        //マーカーを落とす\n        marker = new google.maps.Marker({\n            position : defaultLatLng,\n            map      : map,\n            draggable: false\n        });\n        var msg = function (string, result) {\n            window.alert(string + ': ' + result);\n        };\n        //空じゃなかったらマーカーを移動\n        if ($('#announcement_address').val().length > 0) {\n            corrds.toLatLng($('#announcement_address').val(), msg);\n        }\n        //ボタンをクリックしたとき、アイコンを移動する\n        $('#announcement_address_search1').click(function (e) {\n            e.preventDefault();\n            corrds.toLatLng($('#announcement_address').val(), msg);\n        });\n    }\n\n    // Google Mapの描画（公開画面）\n    if ($('#gmap-announcement').length > 0) {\n        var address = $('#gmap-announcement').text();\n        $('#gmap-announcement').text('');\n        defaultLatLng = new google.maps.LatLng(35.671435, 139.720863);\n        //地図を描画\n        map = new google.maps.Map(document.getElementById(\"gmap-announcement\"), {\n            zoom     : 15,\n            center   : defaultLatLng,\n            mapTypeId: google.maps.MapTypeId.ROADMAP\n        });\n        //マーカーを落とす\n        marker = new google.maps.Marker({\n            position : defaultLatLng,\n            map      : map,\n            draggable: false\n        });\n        //座標を移動\n        corrds.toLatLng(address);\n    }\n});"],"sourceRoot":"/source/"}