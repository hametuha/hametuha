{"version":3,"sources":["common.js"],"names":["$","window","Hametuha","ga","hitEvent","category","action","label","value","nonInteraction","hitType","eventCategory","eventAction","eventLabel","eventValue","err","eventOutbound","event","url","hitCallback","Modernizr","touch","location","href","open","preventDefault","str","yakumono","startYakumono","string","this","test","alert","message","type","delay","typeName","body","$alert","undefined","append","setTimeout","addClass","remove","confirm","callback","deletable","bootbox","dialog","title","buttons","cancel","className","ok","isTategaki","hasClass","template","templateName","HametuhaGlobal","angularTemplateDir","models","views","collections","modal","reset","$box","find","html","close","jQuery","document","on","e","post","done","response","removeClass","fail","responseJSON","method","data","$id","content","trim","val","length","mention","ajax","WP_API_Settings","root","beforeSend","xhr","setRequestHeader","nonce","always","ready","submit","attr","each","index","input","file","next","trigger","change","fileName","split","click","parents","prop","errors","elt","push","text","$checked","$button","post_id","user_id","endpoint","$idContainer","status","genre","reload","postId","box","get","result","form","ajaxSubmit","success","ID","msg","prepend","listTpl","render","btn","before","home_url","brand","hasOwnProperty","target","FB","ui","fbTimer","setInterval","Event","clearInterval","actions","create","subscribe","socialNetwork","socialAction","socialTarget","replace","twTimer","twttr","events","key","bind","pathname","toggleClass","tooltip","container","profileNav","profileNavs","section","id","$target","keyCode","userPickerTimer","userPicking","clearTimeout","$input","$container","$lists","templates","li","users","user","ids","max","parseInt","parent","a","i","notActive","join"],"mappings":"CAMA,SAAWA,GAEP,YAEeC,QAAOC,UAClBC,IAUIC,SAAU,SAAUC,EAAUC,EAAQC,EAAOC,EAAOC,GAChD,IACQ,mBAAuBD,KACvBA,EAAQ,GAEZL,GAAG,QACCO,QAAgB,QAChBC,cAAgBN,EAChBO,YAAgBN,EAChBO,WAAgBN,EAChBO,WAAgBN,EAChBC,iBAAkBA,IAExB,MAAOM,MAcbC,cAAe,SAAUC,EAAOC,EAAKb,EAAUC,EAAQC,EAAOC,GAC1D,IACQ,mBAAuBA,KACvBA,EAAQ,GAGZL,GAAG,QACCO,QAAe,QACfC,cAAeN,EACfO,YAAeN,EACfO,WAAeN,EACfO,WAAeN,EACfW,YAAe,WACPC,UAAUC,MACVpB,OAAOqB,SAASC,KAAOL,EAEnB,UAAYb,EACZJ,OAAOuB,KAAKN,EAAK,WAAY,yBAE7BjB,OAAOuB,KAAKN,EAAK,eAMjCD,EAAMQ,iBACR,MAAOV,OAKjBW,KAOIC,SAAU,wBAQVC,cAAe,SAAUC,GACrB,MAAOC,MAAKH,SAASI,KAAKF,KAWlCG,MAAO,SAAUC,EAASC,EAAMC,GAC5B,GAAIC,GAAUC,EAAMC,CAIpB,QAHIC,SAAcJ,IACdA,EAAQ,KAEJD,GACJ,IAAK,OACL,IAAK,SACL,IAAK,UACDE,EAAWF,CACX,MACJ,MAAK,EACL,IAAK,QACDE,EAAW,QACX,MACJ,SACIA,EAAW,UAGnBC,EAAO,2BAA6BD,EAAW,6KAEvCH,EACJ,SACJK,EAAStC,EAAEqC,GACXrC,EAAE,QAAQwC,OAAOF,GACjBG,WAAW,WACPH,EAAOI,SAAS,oBACjB,IACHD,WAAW,WACPH,EAAOK,UACRR,IAUPS,QAAS,SAAUX,EAASY,EAAUC,GAClCC,QAAQC,QACJC,MAAS,KACThB,QAASA,EACTiB,SACIC,QACI5C,MAAW,QACX6C,UAAW,eAEfC,IACI9C,MAAWuC,EAAY,KAAO,KAC9BM,UAAWN,EAAY,aAAe,cACtCD,SAAWA,OAW3BS,WAAY,WACR,MAAOtD,GAAE,QAAQuD,SAAS,aAS9BC,SAAU,SAASC,GACf,MAAOC,gBAAeC,mBAAqBF,GAO/CG,UAKAC,SAKAC,eAKAC,OAOIvC,KAAO,SAAUyB,EAAOZ,GACpBP,KAAKkC,OACL,IAAIC,GAAOjE,EAAE,gBACbiE,GAAKC,KAAK,gBAAgBC,KAAKlB,GACX,kBAATZ,IAEP4B,EAAKvB,SAAS,WACdL,EAAK4B,IAGLA,EAAKC,KAAK,eAAeC,KAAK9B,GAElC4B,EAAKF,MAAM,SAKfK,MAAO,WACH,GAAIH,GAAOjE,EAAE,gBACb8B,MAAKkC,QACLC,EAAKF,MAAM,SAGfC,MAAO,WACH,GAAIC,GAAOjE,EAAE,gBACbiE,GAAKC,KAAK,gBAAgBC,KAAK,IAC/BF,EAAKC,KAAK,eAAeC,KAAK,QAK3CE,QASH,SAAWrE,GACP,YAEAA,GAAEsE,UAAUC,GAAG,QAAS,YAAa,SAASC,GAC1CA,EAAE/C,iBACFvB,SAAS6D,MAAMvC,KAAK,OAAQ,SAASyC,GACjCjE,EAAEyE,KAAK,mBAAmBC,KAAK,SAAUC,GACrCV,EAAKW,YAAY,WAAWV,KAAK,eAAe1B,OAAOmC,EAASR,QAEjEU,KAAK,SAAUF,GACd,GAAI1C,GAAU0C,EAASG,aAAeH,EAASG,aAAa7C,QAAU,SACtE/B,UAAS8B,MAAMC,GAAS,GACxB/B,SAAS6D,MAAMK,cAK3BpE,EAAEsE,UAAUC,GAAG,SAAU,kBAAmB,SAASC,GACjDA,EAAE/C,gBACF,IACIsD,GAAQC,EADRC,EAAMjF,EAAE8B,MAAMoC,KAAK,gBAEvBc,IACIE,QAASlF,EAAEmF,KAAKnF,EAAE8B,MAAMoC,KAAK,qBAAqBkB,QAEhDJ,EAAKE,QAAQG,SAGdJ,EAAII,OAELN,EAAS,OAGTA,EAAS,OACTC,EAAKM,QAAUtF,EAAE8B,MAAMoC,KAAK,YAAYkB,OAE5CpF,EAAEuF,MACER,OAAQA,EACR7D,IAAKsE,gBAAgBC,KAAO,wBAC5BC,WAAY,SAAUC,GAClBA,EAAIC,iBAAiB,aAAcJ,gBAAgBK,QAEvDb,KAAMA,IACPN,KAAK,SAASC,GACbzE,SAAS8B,MAAM,6BAChB6C,KAAK,SAASF,GACb,GAAI1C,GAAU0C,EAASG,aAAeH,EAASG,aAAa7C,QAAU,SACtE/B,UAAS8B,MAAMC,GAAS,KACzB6D,OAAO,SAASnB,GACfzE,SAAS6D,MAAMK,cAKxBC,QAMHA,OAAOC,UAAUyB,MAAM,SAAU/F,GAE7B,YAEeC,QAAOC,QAGtBF,GAAE,QAAQgG,OAAO,WACbhG,EAAE8B,MAAMoC,KAAK,sBAAsB+B,KAAK,YAAY,KAIxDjG,EAAE,oBAAoBkG,KAAK,SAAUC,EAAOC,GACxC,GAAIC,GAAOrG,EAAEoG,GAAOE,KAAK,QACzBtG,GAAEoG,GAAO7B,GAAG,QAAS,OAAQ,SAAUC,GACnCA,EAAE/C,iBACF4E,EAAKE,QAAQ,WAEjBF,EAAKG,OAAO,SAAUhC,GAClB,GAAIiC,GAAWzG,EAAE8B,MAAMsD,MAAMsB,MAAM,KACnC1G,GAAEoG,GAAOlC,KAAK,oBAAoBkB,IAAIqB,EAASA,EAASpB,OAAS,QAKzErF,EAAE,mBAAmB2G,MAAM,SAAUnC,GAEjCxE,EAAE8B,MAAM8E,QAAQ,QAAQ1C,KAAK,sBAAsB2C,KAAK,YAAa7G,EAAE8B,MAAMmE,KAAK,cAItFjG,EAAE,wCAAwC2G,MAAM,SAAUnC,GACtD,MAAMvE,QAAO2C,QAAQ5C,EAAE8B,MAAMmE,KAAK,iBAAlC,QACW,IAKfjG,EAAE,cAAcgG,OAAO,SAAUxB,GAC7BxE,EAAE8B,MAAMoC,KAAK,iBAAiBvB,QAC9B,IAAImE,KACJ9G,GAAE8B,MAAMoC,KAAK,aAAagC,KAAK,SAAUC,EAAOY,GAC5C,IAAK/G,EAAE+G,GAAK3B,MAAO,CACfpF,EAAE+G,GAAKrE,SAAS,OAChB,IAAInC,GAAQP,EAAE,aAAeA,EAAE+G,GAAKd,KAAK,MAAQ,IAAKnE,KAClDvB,GAAM8E,QACNyB,EAAOE,KAAKzG,EAAM0G,OAAS,eAInCH,EAAOzB,QACPb,EAAE/C,mBAKVzB,EAAEsE,UAAUC,GAAG,SAAU,kBAAmB,WACxC,GAAI2C,GAAWlH,EAAE8B,MAAMoC,KAAK,gCAC5B,QAAQgD,EAAS9B,OACb,IAAK,MAED8B,EAASjB,KAAK,WAAW,EACzB,MACJ,KAAK,SACDjG,EAAE8B,MAAMmE,KAAK,SAAUiB,EAASjB,KAAK,uBACrCiB,EAASjB,KAAK,WAAW,QAgBzC,SAAWjG,GAEP,YAGAA,GAAEsE,UAAUC,GAAG,QAAS,gBAAiB,SAAUC,GAC/C,GAAI2C,GAAUnH,EAAE8B,MACZsF,EAAUD,EAAQlB,KAAK,aAC3BzB,GAAE/C,iBACF0F,EAAQlB,KAAK,YAAY,GACzBjG,EAAEuF,MACErE,IAAYsE,gBAAgBC,KAAO,oBAAsB2B,EAAU,IACnErC,OAAY,OACZW,WAAY,SAAUC,GAClBA,EAAIC,iBAAiB,aAAcJ,gBAAgBK,UAExDnB,KAAK,SAAUC,GACdwC,EAAQlB,KAAK,aAAc,MAAMgB,KAAK,UACtC/G,SAAS8B,MAAM,sBAChB6C,KAAK,SAAUF,GACd,GAAI1C,GAAU0C,EAASG,aAAeH,EAASG,aAAa7C,QAAU,SACtE/B,UAAS8B,MAAMC,GAAS,GACxBkF,EAAQlB,KAAK,YAAY,OAKjCjG,EAAEsE,UAAUC,GAAG,QAAS,oBAAqB,SAAUC,GACnD,GAAI2C,GAAUnH,EAAE8B,KACFqF,GAAQlB,KAAK,iBAC3BzB,GAAE/C,iBACFvB,SAAS6D,MAAMvC,KAAK,WAAY,SAAUyC,GAEtCjE,EAAEyE,KAAK0C,EAAQlB,KAAK,SAASvB,KAAK,SAAUC,GACxCV,EAAKW,YAAY,WAAWV,KAAK,eAAe1B,OAAOmC,EAASR,QACjEU,KAAK,SAAUF,GACd,GAAI1C,GAAU0C,EAASG,aAAeH,EAASG,aAAa7C,QAAU,SACtE/B,UAAS8B,MAAMC,GAAS,GACxB/B,SAAS6D,MAAMK,cAM3BpE,EAAEsE,UAAUC,GAAG,SAAU,uBAAwB,SAAUC,GACvDA,EAAE/C,iBACFzB,EAAEuF,MACER,OAAY,MACZ7D,IAAYsE,gBAAgBC,KAAO,oBAAsBzF,EAAE8B,MAAMmE,KAAK,gBAAkB,IACxFP,WAAY,SAAUC,GAClBA,EAAIC,iBAAiB,aAAcJ,gBAAgBK,QAEvDb,MACIqC,QAASrH,EAAE8B,MAAMoC,KAAK,iBAAiBkB,SAE5CV,KAAK,SAAUC,GACdzE,SAAS8B,MAAM2C,EAAS1C,SACxB/B,SAAS6D,MAAMK,UAChBS,KAAK,SAAUF,GACd,GAAI1C,GAAU0C,EAASG,aAAeH,EAASG,aAAa7C,QAAU,SACtE/B,UAAS8B,MAAMC,GAAS,OAKhCjC,EAAEsE,UAAUC,GAAG,QAAS,6BAA8B,SAAUC,GAC5DA,EAAE/C,gBACF,IAAI0F,GAAUnH,EAAE8B,KAChB5B,UAAS6D,MAAMvC,KAAK,YAAa,SAAUyC,GACvCjE,EAAEyE,KAAK0C,EAAQlB,KAAK,SAASvB,KAAK,SAAUC,GACxCV,EAAKW,YAAY,WAAWV,KAAK,eAAe1B,OAAOmC,EAASR,QACjEU,KAAK,SAAUF,GACd,GAAI1C,GAAU0C,EAASG,aAAeH,EAASG,aAAa7C,QAAU,SACtE/B,UAAS8B,MAAMC,GAAS,GACxB/B,SAAS6D,MAAMK,cAM3BpE,EAAEsE,UAAUC,GAAG,SAAU,iBAAkB,SAAUC,GACjDA,EAAE/C,gBACF,IAEIsD,GAAQC,EAFRsC,EAAe,yBACfC,EAAevH,EAAE8B,MAAMoC,KAAK,eAEhCc,IACI/B,MAASjD,EAAE,kBAAkBoF,MAC7BF,QAASlF,EAAE,qBAAqBoF,MAChCoC,OAASxH,EAAE,qBAAqBiG,KAAK,WAAa,UAAY,UAC9DwB,MAASzH,EAAE,mBAAmBoF,OAE9BmC,EAAalC,QACbN,EAAS,MACTC,EAAKoC,QAAUG,EAAanC,OAE5BL,EAAS,OAEb/E,EAAEuF,MACER,OAAYA,EACZ7D,IAAYsE,gBAAgBC,KAAO6B,EACnC5B,WAAY,SAAUC,GAClBA,EAAIC,iBAAiB,aAAcJ,gBAAgBK,QAEvDb,KAAYA,IACbN,KAAK,SAAUC,GACdzE,SAAS6D,MAAMK,QACXnE,OAAOqB,SAASC,OAASoD,EAASzD,KAClChB,SAAS8B,MAAM2C,EAAS1C,QAAU,mBAClCQ,WAAW,WACPxC,OAAOqB,SAASoG,UACjB,MAEHxH,SAAS8B,MAAM2C,EAAS1C,QAAU,+BAAiC0C,EAASzD,IAAM,yBAEvF2D,KAAK,SAAUF,GACd,GAAI1C,GAAU0C,EAASG,aAAeH,EAASG,aAAa7C,QAAU,SACtE/B,UAAS8B,MAAMC,GAAS,OAKhCjC,EAAEsE,UAAUC,GAAG,QAAS,+BAAgC,SAAUC,GAC9DA,EAAE/C,gBACF,IAAIkG,GAAS3H,EAAE8B,MAAMmE,KAAK,eAC1B/F,UAAS0C,QAAQ,sBAAuB,WACpC5C,EAAEuF,MACER,OAAY,SACZ7D,IAAYsE,gBAAgBC,KAAO,kCAAoCkC,EACvEjC,WAAY,SAAUC,GAClBA,EAAIC,iBAAiB,aAAcJ,gBAAgBK,UAExDnB,KAAK,SAAUC,GACdzE,SAAS8B,MAAM2C,EAAS1C,WACzB4C,KAAK,SAAUF,GACd,GAAI1C,GAAU0C,EAASG,aAAeH,EAASG,aAAa7C,QAAU,SACtE/B,UAAS8B,MAAMC,EAAS,cAE7B,KAIPjC,EAAEsE,UAAUC,GAAG,QAAS,6BAA8B,SAAUC,GAC5D,GAAI8C,GAAWtH,EAAE8B,MAAMmE,KAAK,OAC5BzB,GAAE/C,iBACFvB,SAAS6D,MAAMvC,KAAK,YAAa,SAAUyC,GACvCjE,EAAEyE,KAAK6C,GAAU5C,KAAK,SAAUC,GAC5BV,EAAKW,YAAY,WAAWV,KAAK,eAAe1B,OAAOmC,EAASR,QACjEU,KAAK,SAAUF,GACd,GAAI1C,GAAU0C,EAASG,aAAeH,EAASG,aAAa7C,QAAU,SACtE/B,UAAS8B,MAAMC,EAAS,UACxB/B,SAAS6D,MAAMK,eAM5BC,QAQHA,OAAOC,UAAUyB,MAAO,SAAU/F,GAE9B,YAGAA,GAAEsE,UAAUC,GAAG,QAAS,iBAAkB,SAAUC,GAChDA,EAAE/C,gBACF,IAAIP,GAAMlB,EAAE8B,MAAMmE,KAAK,OACvB/F,UAAS6D,MAAMvC,KAAKxB,EAAE8B,MAAMmE,KAAK,SAAU,SAAU2B,GACjD5H,EAAE6H,IAAI3G,KAAS,SAAU4G,GACrBF,EAAIhD,YAAY,WAChBgD,EAAI1D,KAAK,eAAeC,KAAK2D,EAAO3D,YAMhDnE,EAAEsE,UAAUC,GAAG,SAAU,oBAAqB,SAAUC,GACpDA,EAAE/C,gBACF,IAAIsG,GAAO/H,EAAE8B,KACbiG,GAAKrF,SAAS,WACdqF,EAAKC,YACDC,QAAS,SAAUH,GACXA,EAAOG,QACPF,EAAKxB,QAAQ,oBAAqBuB,EAAOrD,OAEzCvE,SAAS8B,MAAM8F,EAAO7F,SAAS,GAEnC8F,EAAK7D,KAAK,sBAAsB+B,KAAK,YAAY,GACjD8B,EAAKnD,YAAY,gBAM7B5E,EAAE,UAAUuE,GAAG,mBAAoB,oBAAqB,SAAUC,EAAGC,GACjEvE,SAAS6D,MAAMK,QACflE,SAASC,GAAGC,SAAS,OAAQ,MAAOqE,EAAKyD,IACrClI,EAAE,QAAQuD,SAAS,iBACnBjC,SAASoG,WAKjB1H,EAAEsE,UAAUC,GAAG,SAAU,qBAAsB,SAAUC,GACrDA,EAAE/C,gBACF,IAAIsG,GAAO/H,EAAE8B,KACbiG,GAAKrF,SAAS,WACdqF,EAAKC,YACDC,QAAS,SAAUH,GACfC,EAAK7D,KAAK,sBAAsB+B,KAAK,YAAY,GACjD8B,EAAKnD,YAAY,UACjB,IAAIuD,GAAMnI,EAAE,oMACZmI,GAAIzF,SAAS,UAAaoF,EAAOG,QAAU,UAAY,WAClDzF,OAAO,SAAWsF,EAAO7F,QAAU,WACxC8F,EAAKK,QAAQD,GACb1F,WAAW,WACP0F,EAAIjE,KAAK,UAAUqC,QAAQ,UAC5B,UAMfvG,EAAEsE,UAAUC,GAAG,QAAS,eAAgB,SAAUC,GAC9CA,EAAE/C,iBACFvB,SAAS0C,QAAQ5C,EAAE8B,MAAMmE,KAAK,SAAU,WACpCjG,EAAEyE,KAAKzE,EAAE8B,MAAMmE,KAAK,QAAS,SAAU6B,GACnC5H,SAAS8B,MAAM8F,EAAO7F,SAClB6F,EAAOG,SAAWjI,EAAE,QAAQuD,SAAS,kBACrCtD,OAAOqB,SAASC,KAAOuG,EAAO5G,SAGvC,IAIP,IAAImH,GAAUrI,EAAE,mBACZqI,GAAQhD,SAERrF,EAAE,sBAAsBkG,KAAK,SAAUC,EAAOY,GAC1C/G,EAAE+G,GAAK7C,KAAK,gBAAgB1B,OAAO6F,EAAQC,QACvCX,OAAQ3H,EAAE+G,GAAKd,KAAK,qBAI5BjG,EAAE,iBAAiBuE,GAAG,QAAS,qBAAsB,SAAUC,GAC3DA,EAAE/C,gBACF,IAAI8G,GAAMvI,EAAE8B,KACZ5B,UAAS0C,QAAQ,yCAA0C,WACvD5C,EAAEyE,KAAK8D,EAAItC,KAAK,WAAa,SAAU6B,GAC/BA,EAAOG,SACPM,EAAI3B,QAAQ,YAAYjE,SACnB3C,EAAE,sBAAsBqF,SACzBrF,EAAE,iBAAiBwI,OAAO,mCAAqCV,EAAO7F,QAAU,UAChFQ,WAAW,WACPxC,OAAOqB,SAASC,KAAOuG,EAAOW,UAC/B,OAGPvI,SAAS8B,MAAM8F,EAAO7F,SAAS,OAGxC,QAcfoC,OAAOC,UAAUyB,MAAM,SAAU/F,GAE7B,YAGAA,GAAE,eAAekG,KAAK,SAAUC,EAAOY,GACnC,GAAI9C,GAAOjE,EAAE8B,KACb9B,GAAE6H,IAAI5D,EAAKgC,KAAK,mBAAmBvB,KAAK,SAAUoD,GAC9C,GAAIA,EAAOG,QACP,IAAK,GAAIS,KAASZ,GAAOA,OACjBA,EAAOA,OAAOa,eAAeD,IAC7BzE,EAAKC,KAAK,YAAcwE,EAAQ,SAASzB,KAAKa,EAAOA,OAAOY,MAIzE7D,KAAK,cAELiB,OAAO,gBAMd9F,EAAEsE,UAAUC,GAAG,QAAS,UAAW,SAAUC,GACzC,GAAIrE,GAASF,OAAOC,SAASC,GACzBuI,EAAS1I,EAAE8B,MAAMmE,KAAK,eACtB1E,EAASvB,EAAE8B,MAAMmE,KAAK,QACtB2C,EAAS5I,EAAE8B,MAAMmE,KAAK,cAC1B,QAAQyC,GACJ,IAAK,WACD,IACIG,GAAGC,IACC/D,OAAQ,QACRxD,KAAQA,GACT,SAAUoD,GACLA,GACAxE,EAAGC,SAAS,QAASsI,EAAOE,KAGpCpE,EAAE/C,iBACJ,MAAOV,IAET,KACJ,KAAK,SAED,KACJ,SACIZ,EAAGa,cAAcwD,EAAGjD,EAAM,QAASmH,EAAOE,MAMtD5I,EAAEsE,UAAUC,GAAG,QAAS,mBAAoB,SAAUC,GAClD,GAAItD,GAAWlB,EAAE8B,MAAMmE,KAAK,QACxB5F,EAAWL,EAAE8B,MAAMmE,KAAK,iBACxB3F,EAAWN,EAAE8B,MAAMmE,KAAK,eACxB1F,EAAWP,EAAE8B,MAAMmE,KAAK,cACxBzF,EAAWR,EAAE8B,MAAMmE,KAAK,eAAiB,CACzC5F,IAAYC,GAAUC,GACtBL,SAASC,GAAGa,cAAcC,MAAOC,EAAKb,EAAUC,EAAQC,EAAOC,IAKvE,IAAIuI,GAAUC,YAAY,WACtB,GAAK/I,OAAO4I,IAAM5I,OAAO4I,GAAGI,MAAQ,CAChCC,cAAcH,EACd,IAAII,IACAC,OAAQ,OACRzG,OAAQ,UAEZ3C,GAAEkG,KAAKiD,EAAS,SAAStC,EAAMvG,GAC3BuI,GAAGI,MAAMI,UAAU,QAAUxC,EAAM,SAAU3F,GACzC,IACIf,GAAG,QACCO,QAAe,SACf4I,cAAe,WACfC,aAAejJ,EACfkJ,aAAetI,EAAIuI,QAAQ,mCAAoC,MAErE,MAAO1I,WAKtB,KAGC2I,EAAUV,YAAY,WAClB/I,OAAO0J,OAAS1J,OAAO0J,MAAMC,SAC7BV,cAAcQ,GACd1J,EAAEkG,MAAO,SAAU,QAAS,UAAW,QAAS,YAAa,SAASC,EAAO0D,GACzE5J,OAAO0J,MAAMC,OAAOE,KAAKD,EAAK,SAAU5I,GACpC,IACId,GAAG,QACCO,QAAe,SACf4I,cAAe,UACfC,aAAeM,EACfL,aAAevJ,OAAOqB,SAASyI,WAErC,MAAOhJ,WAKtB,OAUPsD,OAAOC,UAAUyB,MAAM,SAAU/F,GAE7B,YAGAA,GAAE,2BAA2B2G,MAAM,WAC/B3G,EAAE,QAAQgK,YAAY,kBAI1BhK,EAAE,aAAaiK,SACX1D,QAAW,oBACX2D,UAAW,QAIf,IAAIC,GAAanK,EAAE,gBACnB,IAAImK,EAAW9E,OAAQ,CACnB,GAAI+E,KACJpK,GAAE,UAAW,iBAAiBkG,KAAK,SAAUC,EAAOkE,GAChD,GAAIC,GAAK,oBAAsBnE,EAAQ,EACvCnG,GAAEqK,GAASpE,KAAK,KAAMqE,GACtBF,EAAYE,GAAMtK,EAAEqK,GAASnG,KAAK,sBAAsB+C,QAE5D,KAAK,GAAIqD,KAAMF,GACPA,EAAYzB,eAAe2B,IAC3BH,EAAW3H,OAAO,iBAAmB8H,EAAK,KAAOF,EAAYE,GAAM,aAK/EtK,EAAE,yBAAyB2G,MAAM,SAASnC,GACtC,GAAI+F,GAAUvK,EAAEA,EAAE8B,MAAMmE,KAAK,eAC7BzB,GAAE/C,iBACE8I,EAAQhH,SAAS,WACjBvD,EAAE,kBAAkB0C,SAAS,UAC7B6H,EAAQ3F,YAAY,WAEpB5E,EAAE,kBAAkB0C,SAAS,cAazC,SAAW1C,GAEP,YAeAA,GAAEsE,UAAUC,GAAG,UAAW,sBAAuB,SAAUC,GACvD,MAAiB,KAAbA,EAAEgG,SACFhG,EAAE/C,kBACK,GAFX,QASJ,IAAIgJ,GAAiBC,GAAc,CACnC1K,GAAEsE,UAAUC,GAAG,QAAS,sBAAuB,SAAUC,GACrD,IAAIkG,EAAJ,CAIID,GACAE,aAAaF,EAEjB,IAAIG,GAAa5K,EAAE8B,MACf+I,EAAaD,EAAOhE,QAAQ,gBAC5BkE,EAASF,EAAOtE,KAAK,6BACrByE,IAEJN,GAAkBhI,WAAW,WACzBiI,GAAc,EACdI,EAAOlG,YAAY,SAASlC,SAAS,WACrCoI,EAAO5G,KAAK,sBAAsBgC,KAAK,SAASC,EAAO6E,GAC7ChL,EAAEgL,GAAI9G,KAAK,6BAA6BmB,QAC1CrF,EAAEgL,GAAIrI,WAGd3C,EAAEuF,MACErE,IAAYsE,gBAAgBC,KAAO,sCAAwCmF,EAAOxF,MAClFL,OAAY,MACZW,WAAY,SAAUC,GAClBA,EAAIC,iBAAiB,aAAcJ,gBAAgBK,UAExDnB,KAAK,SAAUC,GACd,GAAIA,EAASsG,MAAM5F,OAAQ,CACvB,GAAIiF,GAAKO,EAAW5E,KAAK,cACnB8E,GAAUpC,eAAe2B,KAC3BS,EAAUT,GAAMtK,EAAE+K,UAAUT,EAAK,cAErCtK,EAAEkG,KAAKvB,EAASsG,MAAO,SAAU9E,EAAO+E,GACpCJ,EAAOtI,OAAOuI,EAAUT,GAAIhC,OAAO4C,SAG5CrG,KAAK,SAAUF,GACd,GAAI1C,GAAU0C,EAASG,aAAeH,EAASG,aAAa7C,QAAU,SACtE/B,UAAS8B,MAAMC,GAAS,KACzB6D,OAAO,WACNgF,EAAOlG,YAAY,WACZkG,EAAO5G,KAAK,sBAAsBmB,QACrCyF,EAAOpI,SAAS,SAEpB+H,EAAkB,KAClBC,GAAc,KAEnB,QAGP1K,EAAEsE,UAAUC,GAAG,QAAS,qBAAsB,SAAUC,GACpDA,EAAE/C,iBACFzB,EAAE8B,MAAMkI,YAAY,SACpB,IAAIa,GAAa7K,EAAE8B,MAAM8E,QAAQ,gBAC7BuE,KACAC,EAAMC,SAASR,EAAW5E,KAAK,YAAa,GAC5CjG,GAAE8B,MAAMyB,SAAS,YAEjBvD,EAAE8B,MAAMwJ,OAAO,MAAM3I,SACrBkI,EAAWjG,YAAY,WAE3BiG,EAAW3G,KAAK,6BAA6BgC,KAAK,SAASC,EAAOoF,GAC9DJ,EAAInE,KAAKhH,EAAEuL,GAAGtF,KAAK,mBAEnBmF,GAAOD,EAAI9F,SACXwF,EAAWnI,SAAS,UACpBmI,EAAW3G,KAAK,mCAAmCgC,KAAK,SAASsF,EAAGC,GAChEzL,EAAEyL,GAAWH,OAAO,MAAM3I,YAGlC3C,EAAE6K,EAAW5E,KAAK,gBAAgBb,IAAI+F,EAAIO,KAAK,SAIpDrH","file":"common.js","sourcesContent":["/* \n * 破滅派サイト全体で共通して読み込まれるファイル\n */\n\n/*global HametuhaGlobal:false */\n\n(function ($) {\n\n    \"use strict\";\n\n    var Hametuha = window.Hametuha = {\n        ga: {\n            /**\n             * Google Analyticsのイベントを呼ぶ\n             *\n             * @param {String} category\n             * @param {String} action\n             * @param {String} label\n             * @param {...Number} value Default 1\n             * @param {...Boolean} nonInteraction Default false\n             */\n            hitEvent: function (category, action, label, value, nonInteraction) {\n                try {\n                    if ('undefined' === typeof value) {\n                        value = 1;\n                    }\n                    ga('send', {\n                        hitType       : 'event',\n                        eventCategory : category,\n                        eventAction   : action,\n                        eventLabel    : label,\n                        eventValue    : value,\n                        nonInteraction: !!nonInteraction\n                    });\n                } catch (err) {\n                }\n            },\n\n            /**\n             * URLの移動をGAに記録する\n             *\n             * @param {Event} event\n             * @param {String} url\n             * @param {String} category\n             * @param {String} action\n             * @param {String} label\n             * @param {...Number} value\n             */\n            eventOutbound: function (event, url, category, action, label, value) {\n                try {\n                    if ('undefined' === typeof value) {\n                        value = 1;\n                    }\n                    // Send event\n                    ga('send', {\n                        hitType      : 'event',\n                        eventCategory: category,\n                        eventAction  : action,\n                        eventLabel   : label,\n                        eventValue   : value,\n                        hitCallback  : function () {\n                            if (Modernizr.touch) {\n                                window.location.href = url;\n                            } else {\n                                if ('share' === category) {\n                                    window.open(url, 'outbound', \"width=520, height=350\");\n                                } else {\n                                    window.open(url, 'outbound');\n                                }\n                            }\n                        }\n                    });\n                    // stopEvent\n                    event.preventDefault();\n                } catch (err) {\n                }\n            }\n        },\n\n        str: {\n\n            /**\n             * 約物開始判定用正規表現\n             *\n             * @type {RegExp}\n             */\n            yakumono: /^[ 　【】《〔〝『「（”\"'’\\(\\)]/,\n\n            /**\n             * 文字列が約物で始まるかどうか\n             *\n             * @param {String} string\n             * @returns {*|boolean}\n             */\n            startYakumono: function (string) {\n                return this.yakumono.test(string);\n            }\n        },\n\n        /**\n         * グローバルメッセージを表示する\n         *\n         * @param {String} message\n         * @param {String} [type]\n         * @param {Number} [delay]\n         */\n        alert: function (message, type, delay) {\n            var typeName, body, $alert;\n            if( undefined === delay ){\n                delay = 7000;\n            }\n            switch( type ){\n                case 'info':\n                case 'danger':\n                case 'warning':\n                    typeName = type;\n                    break;\n                case true: // Backward compats\n                case 'error':\n                    typeName = 'danger';\n                    break;\n                default:\n                    typeName = 'success';\n                    break;\n            }\n            body = '<div class=\"alert alert-' + typeName + ' alert-dismissible alert-sticky\" role=\"alert\">' +\n                    '<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>' +\n                    message +\n                '</div>';\n            $alert = $(body);\n            $('body').append($alert);\n            setTimeout(function(){\n                $alert.addClass('alert-sticky-on');\n            }, 10);\n            setTimeout(function(){\n                $alert.remove();\n            }, delay);\n        },\n\n        /**\n         * Show confirm dialog\n         *\n         * @param {String} message\n         * @param {Function} [callback]\n         * @param {Boolean} [deletable]\n         */\n        confirm: function (message, callback, deletable) {\n            bootbox.dialog({\n                title  : '確認',\n                message: message,\n                buttons: {\n                    cancel: {\n                        label    : 'キャンセル',\n                        className: 'btn-default'\n                    },\n                    ok    : {\n                        label    : deletable ? '実行' : 'OK',\n                        className: deletable ? 'btn-danger' : 'btn-success',\n                        callback : callback\n                    }\n                }\n            });\n        },\n\n        /**\n         * 投稿が縦書きかどうか\n         *\n         * @returns {Boolean}\n         */\n        isTategaki: function () {\n            return $('body').hasClass('tategaki');\n        },\n\n        /**\n         * Angularのtemplateを返す\n         *\n         * @param templateName\n         * @returns {*}\n         */\n        template: function(templateName){\n            return HametuhaGlobal.angularTemplateDir + templateName;\n        },\n\n        /**\n         * モデルを格納する名前空間\n         * @type {Object}\n         */\n        models: {},\n\n        /**\n         * ビューを格納する名前空間\n         */\n        views: {},\n\n        /**\n         * コレクションを格納する名前空間\n         */\n        collections: {},\n\n        /**\n         * モーダル関係\n         */\n        modal: {\n            /**\n             * モーダルボックスを表示する\n             *\n             * @param {String} title\n             * @param {String|Function} body\n             */\n            open : function (title, body) {\n                this.reset();\n                var $box = $('#hametu-modal');\n                $box.find('.modal-title').html(title);\n                if (typeof body === 'function') {\n                    //\n                    $box.addClass('loading');\n                    body($box);\n                } else {\n                    // 追加して開く\n                    $box.find('.modal-body').html(body);\n                }\n                $box.modal('show');\n            },\n            /**\n             * モーダルボックスを閉じる\n             */\n            close: function () {\n                var $box = $('#hametu-modal');\n                this.reset();\n                $box.modal('hide');\n            },\n\n            reset: function (){\n                var $box = $('#hametu-modal');\n                $box.find('.modal-title').html('');\n                $box.find('.modal-body').html('');\n            }\n\n        }\n    };\n})(jQuery);\n\n/**\n * 安否投稿フォーム\n */\n\n/*global Hametuha: false*/\n/*global WP_API_Settings: true*/\n\n(function ($) {\n    'use strict';\n\n    $(document).on('click', '.anpi-new', function(e){\n        e.preventDefault();\n        Hametuha.modal.open('安否報告', function($box){\n            $.post('/anpi/mine/new/').done(function (response) {\n                $box.removeClass('loading').find('.modal-body').append(response.html);\n\n            }).fail(function (response) {\n                var message = response.responseJSON ? response.responseJSON.message : '失敗しました。';\n                Hametuha.alert(message, true);\n                Hametuha.modal.close();\n            });\n        });\n    });\n\n    $(document).on('submit', '#new-tweet-form', function(e){\n        e.preventDefault();\n        var $id = $(this).find('#new-tweet-id'),\n            method, data;\n        data = {\n            content: $.trim($(this).find('#new-anpi-content').val())\n        };\n        if( ! data.content.length ){\n            return;\n        }\n        if ( $id.length ) {\n            // Edit\n            method = 'PUT';\n        } else {\n            // Newly create\n            method = 'POST';\n            data.mention = $(this).find('#mention').val();\n        }\n        $.ajax({\n            method: method,\n            url: WP_API_Settings.root + 'hametuha/v1/anpi/new/',\n            beforeSend: function( xhr ){\n                xhr.setRequestHeader('X-WP-Nonce', WP_API_Settings.nonce);\n            },\n            data: data\n        }).done(function(response){\n            Hametuha.alert('めつかれさまでした。安否報告を受け付けました。');\n        }).fail(function(response){\n            var message = response.responseJSON ? response.responseJSON.message : '失敗しました。';\n            Hametuha.alert(message, true);\n        }).always(function(response){\n            Hametuha.modal.close();\n        });\n\n    });\n\n})(jQuery);\n\n/**\n * フォームの処理を行う\n */\n\njQuery(document).ready(function ($) {\n\n    \"use strict\";\n\n    var Hametuha = window.Hametuha;\n\n    // フォームの二重送信防止\n    $('form').submit(function () {\n        $(this).find('input[type=submit]').attr('disabled', true);\n    });\n\n    // 画像のアップロード\n    $('.pseudo-uploader').each(function (index, input) {\n        var file = $(input).next('input');\n        $(input).on('click', '.btn', function (e) {\n            e.preventDefault();\n            file.trigger('click');\n        });\n        file.change(function (e) {\n            var fileName = $(this).val().split('\\\\');\n            $(input).find('input[type=text]').val(fileName[fileName.length - 1]);\n        });\n    });\n\n    // フォームのチェックを外す\n    $('.form-unlimiter').click(function (e) {\n        // チェック／アンチェックで送信ボタンを切替\n        $(this).parents('form').find('input[type=submit]').prop('disabled', !$(this).attr('checked'));\n    });\n\n    // 確認ボタン\n    $('a[data-confirm], input[data-confirm]').click(function (e) {\n        if (!(window.confirm($(this).attr('data-confirm')))) {\n            return false;\n        }\n    });\n\n    // フォームバリデーション\n    $('.validator').submit(function (e) {\n        $(this).find('runtime-error').remove();\n        var errors = [];\n        $(this).find('.required').each(function (index, elt) {\n            if (!$(elt).val()) {\n                $(elt).addClass('erro');\n                var label = $('label[for=' + $(elt).attr('id') + ']', this);\n                if (label.length) {\n                    errors.push(label.text() + 'は必須項目です。');\n                }\n            }\n        });\n        if (errors.length) {\n            e.preventDefault();\n        }\n    });\n\n    // 検索フォーム\n    $(document).on('submit', '#searchBox form', function(){\n        var $checked = $(this).find('input[name=post_type]:checked');\n        switch( $checked.val() ){\n            case 'any':\n                // Remove radio\n                $checked.attr('checked', false);\n                break;\n            case 'author':\n                $(this).attr('action', $checked.attr('data-search-action'));\n                $checked.attr('checked', false);\n                break;\n            default:\n                // Do nothing\n                break;\n        }\n    });\n});\n\n/**\n * アイデアを表示するボタン\n */\n\n/*global Hametuha: true*/\n/*global WP_API_Settings: true*/\n\n(function ($) {\n\n    'use strict';\n\n    // ストックボタン\n    $(document).on('click', 'a[data-stock]', function (e) {\n        var $button = $(this),\n            post_id = $button.attr('data-stock');\n        e.preventDefault();\n        $button.attr('disabled', true);\n        $.ajax({\n            url       : WP_API_Settings.root + 'hametuha/v1/idea/' + post_id + '/',\n            method    : 'POST',\n            beforeSend: function (xhr) {\n                xhr.setRequestHeader('X-WP-Nonce', WP_API_Settings.nonce);\n            }\n        }).done(function (response) {\n            $button.attr('data-stock', null).text('ストック済み');\n            Hametuha.alert('このアイデアをストックしました。');\n        }).fail(function (response) {\n            var message = response.responseJSON ? response.responseJSON.message : '失敗しました。';\n            Hametuha.alert(message, true);\n            $button.attr('disabled', false);\n        });\n    });\n\n    // 薦めるボタン\n    $(document).on('click', 'a[data-recommend]', function (e) {\n        var $button = $(this),\n            ideaId  = $button.attr('data-recommend');\n        e.preventDefault();\n        Hametuha.modal.open('アイデアを薦める', function ($box) {\n            // フォームを取得して表示する\n            $.post($button.attr('href')).done(function (response) {\n                $box.removeClass('loading').find('.modal-body').append(response.html);\n            }).fail(function (response) {\n                var message = response.responseJSON ? response.responseJSON.message : '失敗しました。';\n                Hametuha.alert(message, true);\n                Hametuha.modal.close();\n            });\n        });\n    });\n\n    // 薦めるフォーム\n    $(document).on('submit', '#recommend-idea-form', function (e) {\n        e.preventDefault();\n        $.ajax({\n            method    : 'PUT',\n            url       : WP_API_Settings.root + 'hametuha/v1/idea/' + $(this).attr('data-post-id') + '/',\n            beforeSend: function (xhr) {\n                xhr.setRequestHeader('X-WP-Nonce', WP_API_Settings.nonce);\n            },\n            data      : {\n                user_id: $(this).find(\"#recommend_to\").val()\n            }\n        }).done(function (response) {\n            Hametuha.alert(response.message);\n            Hametuha.modal.close();\n        }).fail(function (response) {\n            var message = response.responseJSON ? response.responseJSON.message : '失敗しました。';\n            Hametuha.alert(message, true);\n        });\n    });\n\n    // アイデアを投稿する\n    $(document).on('click', 'a[data-action=\"post-idea\"]', function (e) {\n        e.preventDefault();\n        var $button = $(this);\n        Hametuha.modal.open('アイデアを投稿する', function ($box) {\n            $.post($button.attr('href')).done(function (response) {\n                $box.removeClass('loading').find('.modal-body').append(response.html);\n            }).fail(function (response) {\n                var message = response.responseJSON ? response.responseJSON.message : '失敗しました。';\n                Hametuha.alert(message, true);\n                Hametuha.modal.close();\n            });\n        });\n    });\n\n    // アイデアを保存する\n    $(document).on('submit', '#new-idea-form', function (e) {\n        e.preventDefault();\n        var endpoint     = 'hametuha/v1/idea/mine/',\n            $idContainer = $(this).find('#new-idea-id'),\n            method, data;\n        data = {\n            title  : $('#new-idea-name').val(),\n            content: $('#new-idea-content').val(),\n            status : $('#new-idea-privacy').attr('checked') ? 'private' : 'publish',\n            genre  : $('#new-idea-genre').val()\n        };\n        if ($idContainer.length) {\n            method = 'PUT';\n            data.post_id = $idContainer.val();\n        } else {\n            method = 'POST';\n        }\n        $.ajax({\n            method    : method,\n            url       : WP_API_Settings.root + endpoint,\n            beforeSend: function (xhr) {\n                xhr.setRequestHeader('X-WP-Nonce', WP_API_Settings.nonce);\n            },\n            data      : data\n        }).done(function (response) {\n            Hametuha.modal.close();\n            if (window.location.href === response.url) {\n                Hametuha.alert(response.message + '3秒後にページを更新します……');\n                setTimeout(function () {\n                    window.location.reload();\n                }, 3000);\n            } else {\n                Hametuha.alert(response.message + '<a class=\"alert-link\" href=\"' + response.url + '\">アイデアのページヘ移動する</a>');\n            }\n        }).fail(function (response) {\n            var message = response.responseJSON ? response.responseJSON.message : '失敗しました。';\n            Hametuha.alert(message, true);\n        });\n    });\n\n    // アイデアを削除する\n    $(document).on('click', 'a[data-action=\"delete-idea\"]', function (e) {\n        e.preventDefault();\n        var postId = $(this).attr('data-post-id');\n        Hametuha.confirm('このアイデアを削除してよろしいですか？', function () {\n            $.ajax({\n                method    : 'DELETE',\n                url       : WP_API_Settings.root + 'hametuha/v1/idea/mine/?post_id=' + postId,\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', WP_API_Settings.nonce);\n                }\n            }).done(function (response) {\n                Hametuha.alert(response.message);\n            }).fail(function (response) {\n                var message = response.responseJSON ? response.responseJSON.message : '失敗しました。';\n                Hametuha.alert(message, 'danger');\n            });\n        }, true);\n    });\n\n    // アイデアを編集する\n    $(document).on('click', 'a[data-action=\"edit-idea\"]', function (e) {\n        var endpoint = $(this).attr('href');\n        e.preventDefault();\n        Hametuha.modal.open('アイデアを編集する', function ($box) {\n            $.post(endpoint).done(function (response) {\n                $box.removeClass('loading').find('.modal-body').append(response.html);\n            }).fail(function (response) {\n                var message = response.responseJSON ? response.responseJSON.message : '失敗しました。';\n                Hametuha.alert(message, 'danger');\n                Hametuha.modal.close();\n            });\n        });\n    });\n\n\n})(jQuery);\n\n/**\n * リスト作成用のフォーム\n */\n\n/*global Hametuha: true*/\n\njQuery(document).ready( function ($) {\n\n    'use strict';\n\n    // リスト作成用モーダル\n    $(document).on('click', 'a.list-creator', function (e) {\n        e.preventDefault();\n        var url = $(this).attr('href');\n        Hametuha.modal.open($(this).attr('title'), function (box) {\n            $.get(url, {}, function (result) {\n                box.removeClass('loading');\n                box.find('.modal-body').html(result.html);\n            });\n        });\n    });\n\n    // リスト作成フォーム\n    $(document).on('submit', '.list-create-form', function (e) {\n        e.preventDefault();\n        var form = $(this);\n        form.addClass('loading');\n        form.ajaxSubmit({\n            success: function (result) {\n                if (result.success) {\n                    form.trigger('created.hametuha', [result.post]);\n                } else {\n                    Hametuha.alert(result.message, true);\n                }\n                form.find('input[type=submit]').attr('disabled', false);\n                form.removeClass('loading');\n            }\n        });\n    });\n\n    // モーダルの中のリスト\n    $('.modal').on('created.hametuha', '.list-create-form', function (e, post) {\n        Hametuha.modal.close();\n        Hametuha.ga.hitEvent('list', 'add', post.ID);\n        if ($('body').hasClass('single-lists')) {\n            location.reload();\n        }\n    });\n\n    // リスト追加フォーム\n    $(document).on('submit', '.list-save-manager', function (e) {\n        e.preventDefault();\n        var form = $(this);\n        form.addClass('loading');\n        form.ajaxSubmit({\n            success: function (result) {\n                form.find('input[type=submit]').attr('disabled', false);\n                form.removeClass('loading');\n                var msg = $('<div class=\"alert alert-dismissible\" role=\"alert\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\"><span aria-hidden=\"true\">&times;</span><span class=\"sr-only\">閉じる</span></button></div>');\n                msg.addClass('alert-' + ( result.success ? 'success' : 'danger' ))\n                    .append('<span>' + result.message + '</span>');\n                form.prepend(msg);\n                setTimeout(function () {\n                    msg.find('button').trigger('click');\n                }, 5000);\n            }\n        });\n    });\n\n    // リスト削除ボタン\n    $(document).on('click', '.list-eraser', function (e) {\n        e.preventDefault();\n        Hametuha.confirm($(this).attr('title'), function() {\n            $.post($(this).attr('href'), function (result) {\n                Hametuha.alert(result.message);\n                if (result.success && $('body').hasClass('single-lists')) {\n                    window.location.href = result.url;\n                }\n            });\n        }, true);\n    });\n\n    // リストから投稿を削除\n    var listTpl = $('#my-list-deleter');\n    if (listTpl.length) {\n        // ボタンを追加\n        $('ol.media-list > li').each(function (index, elt) {\n            $(elt).find('.list-inline').append(listTpl.render({\n                postId: $(elt).attr('data-post-id')\n            }));\n        });\n        // イベントリスナー\n        $('ol.media-list').on('click', '.deregister-button', function (e) {\n            e.preventDefault();\n            var btn = $(this);\n            Hametuha.confirm('リストからこの作品を削除します。この操作は取り消せませんが、よろしいですか？', function(){\n                $.post(btn.attr('href'), {}, function (result) {\n                    if (result.success) {\n                        btn.parents('li.media').remove();\n                        if (!$('ol.media-list > li').length) {\n                            $('ol.media-list').before('<div class=\"alert alert-danger\">' + result.message + '</div>');\n                            setTimeout(function () {\n                                window.location.href = result.home_url;\n                            }, 3000);\n                        }\n                    } else {\n                        Hametuha.alert(result.message, true);\n                    }\n                });\n            }, true);\n        });\n    }\n\n\n});\n\n/**\n * Social related functions\n */\n\n/*global Hametuha: true*/\n/*global FB:false*/\n\njQuery(document).ready(function ($) {\n\n    'use strict';\n\n    // ソーシャルカウント\n    $('.row--share').each(function (index, elt) {\n        var $box = $(this);\n        $.get($box.attr('data-share-url')).done(function (result) {\n            if (result.success) {\n                for (var brand in result.result) {\n                    if (result.result.hasOwnProperty(brand)) {\n                        $box.find('a.share--' + brand + ' span').text(result.result[brand]);\n                    }\n                }\n            }\n        }).fail(function () {\n            // Do nothing\n        }).always(function () {\n            // Do nothing\n        });\n    });\n\n    // シェアボタンクリック\n    $(document).on('click', 'a.share', function (e) {\n        var ga     = window.Hametuha.ga,\n            brand  = $(this).attr('data-medium'),\n            href   = $(this).attr('href'),\n            target = $(this).attr('data-target');\n        switch (brand) {\n            case 'facebook':\n                try {\n                    FB.ui({\n                        method: 'share',\n                        href  : href\n                    }, function (response) {\n                        if (response) {\n                            ga.hitEvent('share', brand, target);\n                        }\n                    });\n                    e.preventDefault();\n                } catch (err) {\n                }\n                break;\n            case 'hatena':\n                // Do noghing\n                break;\n            default:\n                ga.eventOutbound(e, href, 'share', brand, target);\n                break;\n        }\n    });\n\n    // アウトバウンドを記録\n    $(document).on('click', 'a[data-outbound]', function (e) {\n        var url      = $(this).attr('href'),\n            category = $(this).attr('data-outbound'),\n            action   = $(this).attr('data-action'),\n            label    = $(this).attr('data-label'),\n            value    = $(this).attr('data-value') || 1;\n        if (category && action && label) {\n            Hametuha.ga.eventOutbound(event, url, category, action, label, value);\n        }\n    });\n\n    // いいねを集計\n    var fbTimer = setInterval(function () {\n        if ( window.FB && window.FB.Event ) {\n            clearInterval(fbTimer);\n            var actions = {\n                create: 'like',\n                remove: 'dislike'\n            };\n            $.each(actions, function(prop, action){\n                FB.Event.subscribe('edge.' + prop, function (url) {\n                    try {\n                        ga('send', {\n                            hitType      : 'social',\n                            socialNetwork: 'facebook',\n                            socialAction : action,\n                            socialTarget : url.replace(/^https?:\\/\\/hametuha\\.(com|info)/, '')\n                        });\n                    } catch (err) {\n                    }\n                });\n            });\n        }\n    }, 100);\n\n    // つぶやきを集計\n    var twTimer = setInterval(function () {\n        if (window.twttr && window.twttr.events) {\n            clearInterval(twTimer);\n            $.each( ['follow', 'tweet', 'retweet', 'click', 'favorite'], function(index, key){\n                window.twttr.events.bind(key, function (event) {\n                    try {\n                        ga('send', {\n                            hitType      : 'social',\n                            socialNetwork: 'twitter',\n                            socialAction : key,\n                            socialTarget : window.location.pathname\n                        });\n                    } catch (err) {\n                    }\n                });\n            });\n        }\n    }, 100);\n\n});\n\n/**\n * Common UI Parts\n */\n\n/*global Hametuha: true*/\n\njQuery(document).ready(function ($) {\n\n    'use strict';\n\n    // Off canvas\n    $('[data-toggle=offcanvas]').click(function () {\n        $('body').toggleClass('offcanvas-on');\n    });\n\n    // ツールチップ\n    $('.help-tip').tooltip({\n        trigger  : 'hover focus click',\n        container: 'body'\n    });\n\n    // プロフィールページのナビ\n    var profileNav = $('#profile-navi');\n    if (profileNav.length) {\n        var profileNavs = {};\n        $('section', '#your-profile').each(function (index, section) {\n            var id = 'profile-section-' + (index + 1);\n            $(section).attr('id', id);\n            profileNavs[id] = $(section).find('h2, h3:first-child').text();\n        });\n        for (var id in profileNavs) {\n            if (profileNavs.hasOwnProperty(id)) {\n                profileNav.append('<li><a href=\"#' + id + '\">' + profileNavs[id] + '</a></li>');\n            }\n        }\n    }\n\n    $('.subnav__link--toggle').click(function(e){\n        var $target = $($(this).attr('data-target'));\n        e.preventDefault();\n        if( $target.hasClass('toggle') ){\n            $('.subnav__child').addClass('toggle');\n            $target.removeClass('toggle');\n        }else{\n            $('.subnav__child').addClass('toggle');\n        }\n    });\n\n});\n\n/**\n * ユーザーをピックアップするボックス\n */\n\n/*global Hametuha: true*/\n/*global WP_API_Settings: true */\n\n(function ($) {\n\n    'use strict';\n\n    /**\n     * Get parent container\n     *\n     * @param {Object} element\n     * @returns {jQuery}\n     */\n    function getParent(element) {\n        return $(element).parents('.user-picker');\n    }\n\n    /*\n     * Avoid Enter\n     */\n    $(document).on('keydown', '.user-picker__input', function (e) {\n        if (e.keyCode == 13) {\n            e.preventDefault();\n            return false;\n        }\n    });\n\n    /*\n     * Incremental Search\n     */\n    var userPickerTimer, userPicking = false, tpl = {};\n    $(document).on('keyup', '.user-picker__input', function (e) {\n        if (userPicking) {\n            return;\n        }\n        // If timer is set, clear.\n        if (userPickerTimer) {\n            clearTimeout(userPickerTimer);\n        }\n        var $input     = $(this),\n            $container = $input.parents('.user-picker'),\n            $lists = $input.next('.user-picker__placeholder'),\n            templates  = {};\n\n        userPickerTimer = setTimeout(function () {\n            userPicking = true;\n            $lists.removeClass('empty').addClass('loading');\n            $lists.find('.user-picker__item').each(function(index, li){\n                if( ! $(li).find('.user-picker__link.active').length ){\n                    $(li).remove();\n                }\n            });\n            $.ajax({\n                url       : WP_API_Settings.root + 'hametuha/v1/doujin/following/me/?s=' + $input.val(),\n                method    : 'GET',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', WP_API_Settings.nonce);\n                }\n            }).done(function (response) {\n                if (response.users.length) {\n                    var id = $container.attr('data-target');\n                    if( ! templates.hasOwnProperty(id) ){\n                        templates[id] = $.templates(id + '-template');\n                    }\n                    $.each(response.users, function (index, user) {\n                        $lists.append(templates[id].render(user));\n                    });\n                }\n            }).fail(function (response) {\n                var message = response.responseJSON ? response.responseJSON.message : '失敗しました。';\n                Hametuha.alert(message, true);\n            }).always(function () {\n                $lists.removeClass('loading');\n                if ( ! $lists.find('.user-picker__item').length ) {\n                    $lists.addClass('empty');\n                }\n                userPickerTimer = null;\n                userPicking = false;\n            });\n        }, 1000);\n    });\n\n    $(document).on('click', '.user-picker__link', function (e) {\n        e.preventDefault();\n        $(this).toggleClass('active');\n        var $container = $(this).parents('.user-picker'),\n            ids = [],\n            max = parseInt($container.attr('data-max'), 10);\n        if ($(this).hasClass('active')) {\n        } else {\n            $(this).parent('li').remove();\n            $container.removeClass('filled');\n        }\n        $container.find('.user-picker__link.active').each(function(index, a){\n            ids.push($(a).attr('data-user-id'));\n        });\n        if (max <= ids.length) {\n            $container.addClass('filled');\n            $container.find('.user-picker__link:not(.active)').each(function(i, notActive){\n                $(notActive).parent('li').remove();\n            });\n        }\n        $($container.attr('data-target')).val(ids.join(','));\n    });\n\n\n})(jQuery);\n"],"sourceRoot":"/source/"}