{"version":3,"sources":["common.js"],"names":["$","window","Hametuha","ga","hitEvent","category","action","label","value","nonInteraction","hitType","eventCategory","eventAction","eventLabel","eventValue","err","eventOutbound","event","url","hitCallback","Modernizr","touch","location","href","open","preventDefault","str","yakumono","startYakumono","string","this","test","alert","message","error","isTategaki","hasClass","models","views","collections","modal","title","body","box","find","html","addClass","close","jQuery","document","ready","submit","attr","each","index","input","file","next","on","e","trigger","change","fileName","val","split","length","click","parents","prop","confirm","toggleClass","tooltip","container","profileNav","profileNavs","section","id","text","hasOwnProperty","append","remove","errors","elt","push","get","result","removeClass","form","ajaxSubmit","success","post","ID","reload","msg","prepend","setTimeout","listTpl","render","postId","btn","before","home_url","$box","done","brand","fail","always","target","FB","ui","method","response","fbTimer","setInterval","Event","clearInterval","actions","create","p","subscribe","socialNetwork","socialAction","socialTarget","replace","twTimer","twttr","events","i","key","bind","pathname"],"mappings":"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","file":"common.js","sourcesContent":["/* \n * 破滅派サイト全体で共通して読み込まれるファイル\n */\n\n/*global ga: true*/\n/*global FB: true*/\n/*global twttr: true*/\n\n(function($){\n\n    \"use strict\";\n\n    var Hametuha = window.Hametuha = {\n        ga: {\n            /**\n             * Google Analyticsのイベントを呼ぶ\n             *\n             * @param {String} category\n             * @param {String} action\n             * @param {String} label\n             * @param {...Number} value Default 1\n             * @param {...Boolean} nonInteraction Default false\n             */\n            hitEvent: function(category, action, label, value, nonInteraction){\n                try{\n                    if( 'undefined' === typeof value){\n                       value = 1;\n                    }\n                    ga('send', {\n                        hitType: 'event',\n                        eventCategory: category,\n                        eventAction: action,\n                        eventLabel: label,\n                        eventValue: value,\n                        nonInteraction: !!nonInteraction\n                    });\n                }catch(err){}\n            },\n\n            /**\n             * URLの移動をGAに記録する\n             *\n             * @param {Event} event\n             * @param {String} url\n             * @param {String} category\n             * @param {String} action\n             * @param {String} label\n             * @param {...Number} value\n             */\n            eventOutbound: function(event, url, category, action, label, value){\n                try{\n                    if( 'undefined' === typeof value){\n                        value = 1;\n                    }\n                    // Send event\n                    ga('send', {\n                        hitType: 'event',\n                        eventCategory: category,\n                        eventAction: action,\n                        eventLabel: label,\n                        eventValue: value,\n                        hitCallback: function(){\n                            if( Modernizr.touch ){\n                                window.location.href = url;\n                            }else{\n                                window.open(url, 'outbount', \"width=520, height=350\");\n                            }\n                        }\n                    });\n                    // stopEvent\n                    event.preventDefault();\n                }catch(err){}\n            }\n        },\n\n        str: {\n\n            /**\n             * 約物開始判定用正規表現\n             *\n             * @type {RegExp}\n             */\n            yakumono: /^[ 　【】《〔〝『「（”\"'’\\(\\)]/,\n\n            /**\n             * 文字列が約物で始まるかどうか\n             *\n             * @param {String} string\n             * @returns {*|boolean}\n             */\n            startYakumono: function(string){\n                return this.yakumono.test(string);\n            }\n        },\n\n        /**\n         * グローバルメッセージを表示する\n         *\n         * @param {String} message\n         * @param {Boolean} error\n         */\n        alert: function(message, error){\n            window.alert(message);\n        },\n\n        /**\n         * 投稿が縦書きかどうか\n         *\n         * @returns {Boolean}\n         */\n        isTategaki: function(){\n            return $('body').hasClass('tategaki');\n        },\n\n        /**\n         * モデルを格納する名前空間\n         * @type {Object}\n         */\n        models: {},\n\n        /**\n         * ビューを格納する名前空間\n         */\n        views: {},\n\n        /**\n         * コレクションを格納する名前空間\n         */\n        collections: {},\n\n        /**\n         * モーダル関係\n         */\n        modal: {\n            /**\n             * モーダルボックスを表示する\n             *\n             * @param {String} title\n             * @param {String|Function} body\n             */\n            open: function(title, body){\n                var box = $('#hametu-modal');\n                box.find('.modal-title').html(title);\n                if( typeof body === 'function'){\n                    //\n                    box.addClass('loading');\n                    body(box);\n                }else{\n                    // 追加して開く\n                    box.find('.modal-body').html(body);\n                }\n                box.modal('show');\n            },\n            /**\n             * モーダルボックスを閉じる\n             */\n            close: function(){\n                var box = $('#hametu-modal');\n                box.find('.modal-title').html('');\n                box.find('.modal-body').html('');\n                box.modal('hide');\n            }\n        }\n    };\n})(jQuery);\n\n\n\njQuery(document).ready(function($){\n\n    \"use strict\";\n\n    var Hametuha = window.Hametuha;\n\n\t// フォームの二重送信防止\n\t$('form').submit(function(){\n\t\t$(this).find('input[type=submit]').attr('disabled', true);\n\t});\n\n    // 画像のアップロード\n    $('.pseudo-uploader').each(function(index, input){\n        var file = $(input).next('input');\n        $(input).on('click', '.btn', function(e){\n            e.preventDefault();\n            file.trigger('click');\n        });\n        file.change(function(e){\n            var fileName = $(this).val().split('\\\\');\n            $(input).find('input[type=text]').val(fileName[fileName.length - 1]);\n        });\n    });\n\n    // フォームのチェックを外す\n    $('.form-unlimiter').click(function(e){\n        // チェック／アンチェックで送信ボタンを切替\n        $(this).parents('form').find('input[type=submit]').prop('disabled', !$(this).attr('checked'));\n    });\n\n    // 確認ボタン\n    $('a[data-confirm], input[data-confirm]').click(function(e){\n        if( !(window.confirm($(this).attr('data-confirm'))) ){\n            return false;\n        }\n    });\n\n    // Off canvas\n    $('[data-toggle=offcanvas]').click(function () {\n        $('body').toggleClass('offcanvas-on');\n    });\n\n    // ツールチップ\n    $('.help-tip').tooltip({\n        trigger: 'hover focus click',\n        container: 'body'\n    });\n\n\n\n    // プロフィールナビ\n    var profileNav = $('#profile-navi');\n    if( profileNav.length ){\n        var profileNavs = {};\n        $('section', '#your-profile').each(function(index, section){\n            var id = 'profile-section-' + (index + 1);\n            $(section).attr('id', id);\n            profileNavs[id] = $(section).find('h2, h3:first-child').text();\n        });\n        for( var id in profileNavs){\n            if( profileNavs.hasOwnProperty(id) ){\n                profileNav.append('<li><a href=\"#' + id + '\">' + profileNavs[id] + '</a></li>');\n            }\n        }\n    }\n\n    // フォームバリデーション\n    $('.validator').submit(function(e){\n        $(this).find('runtime-error').remove();\n        var errors = [];\n        $(this).find('.required').each(function(index, elt){\n            if( !$(elt).val() ){\n                $(elt).addClass('erro');\n                var label = $('label[for=' + $(elt).attr('id') + ']', this);\n                if( label.length ){\n                    errors.push( label.text() + 'は必須項目です。');\n                }\n            }\n        });\n        if( errors.length ){\n            e.preventDefault();\n        }\n    });\n\n    // リスト作成用モーダル\n    $(document).on('click', 'a.list-creator', function(e){\n        e.preventDefault();\n        var url = $(this).attr('href');\n        Hametuha.modal.open($(this).attr('title'), function(box){\n            $.get(url, {}, function(result){\n                box.removeClass('loading');\n                box.find('.modal-body').html(result.html);\n            });\n        });\n    });\n\n    // リスト作成フォーム\n    $(document).on('submit', '.list-create-form', function(e){\n        e.preventDefault();\n        var form = $(this);\n        form.addClass('loading');\n        form.ajaxSubmit({\n            success: function(result){\n                if( result.success ){\n                    form.trigger('created.hametuha', [result.post]);\n                }else{\n                    window.alert(result.message);\n                }\n                form.find('input[type=submit]').attr('disabled', false);\n                form.removeClass('loading');\n            }\n        });\n    });\n\n    // モーダルの中のリスト\n    $('.modal').on('created.hametuha', '.list-create-form', function(e, post){\n        Hametuha.modal.close();\n        Hametuha.ga.hitEvent('list', 'add', post.ID);\n        if( $('body').hasClass('single-lists') ){\n            location.reload();\n        }\n    });\n\n    // リスト追加フォーム\n    $(document).on('submit', '.list-save-manager', function(e){\n        e.preventDefault();\n        var form = $(this);\n        form.addClass('loading');\n        form.ajaxSubmit({\n            success: function(result){\n                form.find('input[type=submit]').attr('disabled', false);\n                form.removeClass('loading');\n                var msg = $('<div class=\"alert alert-dismissible\" role=\"alert\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\"><span aria-hidden=\"true\">&times;</span><span class=\"sr-only\">閉じる</span></button></div>');\n                msg.addClass('alert-' + ( result.success ? 'success' : 'danger' ))\n                    .append('<span>' + result.message + '</span>');\n                form.prepend(msg);\n                setTimeout(function(){\n                    msg.find('button').trigger('click');\n                }, 5000);\n            }\n        });\n    });\n\n    // リスト削除ボタン\n    $(document).on('click', '.list-eraser', function(e){\n        e.preventDefault();\n        if( window.confirm($(this).attr('title')) ){\n            $.post($(this).attr('href'), function(result){\n                window.alert(result.message);\n                if( result.success && $('body').hasClass('single-lists') ){\n                    window.location.href = result.url;\n                }\n            });\n        }\n    });\n\n    // リストから投稿を削除\n    var listTpl = $('#my-list-deleter');\n    if( listTpl.length ){\n        // ボタンを追加\n        $('ol.media-list > li').each(function(index, elt){\n            $(elt).find('.list-inline').append(listTpl.render({\n                postId: $(elt).attr('data-post-id')\n            }));\n        });\n        // イベントリスナー\n        $('ol.media-list').on('click', '.deregister-button', function(e){\n            e.preventDefault();\n            var btn = $(this);\n            if( window.confirm('リストからこの作品を削除します。この操作は取り消せませんが、よろしいですか？') ){\n                $.post(btn.attr('href'), {}, function(result){\n                    if( result.success ){\n                        btn.parents('li.media').remove();\n                        if( !$('ol.media-list > li').length ){\n                            $('ol.media-list').before('<div class=\"alert alert-danger\">' + result.message + '</div>');\n                            setTimeout(function(){\n                                window.location.href = result.home_url;\n                            }, 3000);\n                        }\n                    }else{\n                        Hametuha.alert(result.message);\n                    }\n                });\n            }\n        });\n    }\n\n    // ソーシャルカウント\n    $('.row--share').each(function(index, elt){\n        var $box = $(this);\n        $.get($box.attr('data-share-url')).done(function(result){\n            if( result.success ){\n                for( var brand in result.result ){\n                    if( result.result.hasOwnProperty(brand) ){\n                        $box.find('a.share--' + brand + ' span').text(result.result[brand]);\n                    }\n                }\n            }\n        }).fail(function(){\n            // Do nothing\n        }).always(function(){\n            // Do nothing\n        });\n    });\n\n    // シェアボタンクリック\n    $(document).on('click', 'a.share', function(e){\n        var ga = window.Hametuha.ga,\n            brand = $(this).attr('data-medium'),\n            href = $(this).attr('href'),\n            target = $(this).attr('data-target');\n        switch(brand){\n            case 'facebook':\n                try{\n                    FB.ui({\n                        method: 'share',\n                        href: href\n                    }, function(response){\n                        if( response ){\n                            ga.hitEvent('share', brand, target);\n                        }\n                    });\n                    e.preventDefault();\n                }catch(err){}\n                break;\n            case 'hatena':\n                // Do noghing\n                break;\n            default:\n                ga.eventOutbound(e, href, 'share', brand, target);\n                break;\n        }\n    });\n\n    // アウトバウンドを記録\n    $(document).on('click', 'a[data-outbound]', function(e){\n        var url = $(this).attr('href'),\n            category = $(this).attr('data-outbound'),\n            action = $(this).attr('data-action'),\n            label = $(this).attr('data-label'),\n            value = $(this).attr('data-value') || 1;\n        if( category && action && label ){\n            Hametuha.ga.eventOutbound(event, url, category, action, label, value);\n        }\n    });\n\n    // いいねを集計\n    var fbTimer = setInterval(function(){\n        if( window.FB && window.FB.Event ){\n            clearInterval(fbTimer);\n            var actions = {\n                create: 'like',\n                remove: 'dislike'\n            };\n            for( var prop in actions ){\n                if( !actions.hasOwnProperty(prop) ){\n                    continue;\n                }\n                (function(p, action){\n                    FB.Event.subscribe('edge.' + p, function(url) {\n                        try{\n                            ga('send', {\n                                hitType: 'social',\n                                socialNetwork: 'facebook',\n                                socialAction: action,\n                                socialTarget: url.replace(/^https?:\\/\\/hametuha\\.(com|info)/, '')\n                            });\n                        }catch( err ){}\n                    });\n                })(prop, actions[prop]);\n            }\n        }\n    }, 100);\n\n    // つぶやきを集計\n    var twTimer = setInterval(function(){\n        if(window.twttr && window.twttr.events){\n            clearInterval(twTimer);\n            var events = ['follow', 'tweet', 'retweet', 'click', 'favorite'];\n            for( var i = 0; i < events.length; i++ ){\n                (function(key){\n                    window.twttr.events.bind(key, function (event) {\n                        try{\n                            ga('send', {\n                                hitType:'social',\n                                socialNetwork: 'twitter',\n                                socialAction: key,\n                                socialTarget: window.location.pathname\n                            });\n                        } catch ( err ){}\n                    });\n                })(events[i]);\n            }\n        }\n    }, 100);\n\n\n});\n"],"sourceRoot":"/source/"}