!function(t){"use strict";function e(e){e||(e=200),n&&clearTimeout(n),n=setTimeout(function(){var e=t(window).height(),n=t(".container--hameditor"),a=t(".mce-edit-area iframe"),o=a.height(),r=e-n.outerHeight();a.height(o+r-1)},e)}var n;t(document).ready(function(){var n=setInterval(function(){t(".mce-edit-area iframe").length&&(clearInterval(n),e(20))},100);t("#quit-editting").click(function(e){e.preventDefault();var n=t(this).attr("href");Hametuha.confirm("編集をやめてこのページを移動しますか？ 保存していない変更は失われます。",function(){window.location.href=n})})}),t(window).on("resize",function(){e()}),t(document).ready(function(){angular.module("hametuha",["ui.bootstrap"]).filter("i18n",[function(){return function(t,e){switch(e){case"postStatus":switch(t.toLowerCase()){case"publish":return"公開済み";case"future":return"公開予約";case"private":return"非公開";case"auto-draft":case"draft":return"下書き";case"pending":return"レビュー待ち";default:return t}break;case"postStatusLabel":switch(t.toLowerCase()){case"publish":case"future":return"success";case"private":return"danger";case"pending":return"warning";default:return"default"}break;default:return t}}}]).directive("postStatus",function(){return{restrict:"E",replace:!0,scope:{status:"@"},templateUrl:Hametuha.template("post-status.html")}}).directive("postPublisher",["$uibModal",function(t){return{restrict:"E",replace:!1,scope:{postDate:"=",postStatus:"@",postCallback:"@"},templateUrl:Hametuha.template("post-publisher.html"),link:function(e,n,a){e.ask=function(){var e=t.open({animation:!0,templateUrl:Hametuha.template("post-date-selector.html"),controller:"postDateSelector",size:"sm"});e.result.then(function(t){console.log(t)},function(){})}}}}]).controller("postDateSelector",["$scope","$uibModalInstance",function(t,e){t.type="",t.errorMsg="",t.ok=function(){t.errorMsg="だめじゃん"},t.cancel=function(){t.errorMsg="",e.dismiss("cancel")}}]).controller("hameditor",["$scope","$http","$timeout",function(e,n,a){function o(t,e,a){var o={method:t,url:WP_API_Settings.root+e,headers:{"X-WP-Nonce":WP_API_Settings.nonce}};if(a)switch(t){case"POST":case"PUT":o.data=a;break;default:o.params=a}return n(o)}function r(){t(".hameditor__actions").addClass("hameditor__actions--loading")}function i(){t(".hameditor__actions").removeClass("hameditor__actions--loading")}function s(t){Hametuha.alert(t.data.message,!0)}function c(n){return n.title=e.post.title,tinyMCE.activeEditor.save(),n.content=t("#hamce").val(),n}e.post=HameditorPost,e.save=function(){r(),o("POST","wp/v2/"+e.post.type+"/"+e.post.id,c({modified:(new Date).toISOString()})).then(function(t){e.post.modified=(new Date).toISOString(),Hametuha.alert("保存しました。","success",2e3)},s).then(i)},e.publish=function(){Hametuha.confirm("公開してよろしいですか？",function(){})},e["private"]=function(){r(),o("POST","wp/v2/"+e.post.type+"/"+e.post.id,c({status:"private"})).then(function(t){e.post.status="private",Hametuha.alert("投稿を非公開にしました。","warning",2e3)},s).then(i)},e["delete"]=function(t){Hametuha.confirm("この投稿を削除してよろしいですか？ この操作は取り消せません。",function(){r(),o("DELETE","wp/v2/"+e.post.type+"/"+e.post.id).then(function(){Hametuha.alert("削除しました。一覧に移動します。","warning",2e3),a(function(){window.location.href=t},2e3)},s).then(i)},!0)}}])})}(jQuery);
//# sourceMappingURL=../map/editor/common.js.map