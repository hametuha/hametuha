!function(t){"use strict";window.Hametuha={ga:{hitEvent:function(t,e,a,i,n){try{"undefined"==typeof i&&(i=1),ga("send",{hitType:"event",eventCategory:t,eventAction:e,eventLabel:a,eventValue:i,nonInteraction:!!n})}catch(o){}},eventOutbound:function(t,e,a,i,n){try{ga("send",{hitType:"event",eventCategory:a,eventAction:i,eventLabel:n,hitCallback:function(){window.location.href=e}}),t.preventDefault()}catch(o){}}},str:{yakumono:/^[ 　【】《〔〝『「（”"'’—\(\)]/,startYakumono:function(t){return this.yakumono.test(t)}},alert:function(t,e){window.alert(t)},isTategaki:function(){return t("body").hasClass("tategaki")},models:{},views:{},collections:{},modal:{open:function(e,a){var i=t("#hametu-modal");i.find(".modal-title").html(e),"function"==typeof a?(i.addClass("loading"),a(i)):i.find(".modal-body").html(a),i.modal("show")},close:function(){var e=t("#hametu-modal");e.find(".modal-title").html(""),e.find(".modal-body").html(""),e.modal("hide")}}}}(jQuery),jQuery(document).ready(function(t){"use strict";var e=window.Hametuha;t("form").submit(function(){t(this).find("input[type=submit]").attr("disabled",!0)}),t(".pseudo-uploader").each(function(e,a){var i=t(a).next("input");t(a).on("click",".btn",function(t){t.preventDefault(),i.trigger("click")}),i.change(function(e){var i=t(this).val().split("\\");t(a).find("input[type=text]").val(i[i.length-1])})}),t(".form-unlimiter").click(function(e){t(this).parents("form").find("input[type=submit]").prop("disabled",!t(this).attr("checked"))}),t("a[data-confirm], input[data-confirm]").click(function(e){return window.confirm(t(this).attr("data-confirm"))?void 0:!1}),t("[data-toggle=offcanvas]").click(function(){t("body").toggleClass("offcanvas-on")}),t(".help-tip").tooltip({trigger:"hover focus click",container:"body"}),t(document).on("click","a.share",function(e){var a=window.Hametuha.ga,i=t(this).attr("data-medium"),n=t(this).attr("href"),o=t(this).attr("data-target");switch(i){case"facebook":try{FB.ui({method:"share",href:n},function(t){t&&a.hitEvent("share",i,o)})}catch(s){}break;default:a.eventOutbound(e,n,"share",i,o)}});var a=t("#profile-navi");if(a.length){var i={};t("section","#your-profile").each(function(e,a){var n="profile-section-"+(e+1);t(a).attr("id",n),i[n]=t(a).find("h2, h3:first-child").text()});for(var n in i)i.hasOwnProperty(n)&&a.append('<li><a href="#'+n+'">'+i[n]+"</a></li>")}t(".validator").submit(function(e){t(this).find("runtime-error").remove();var a=[];t(this).find(".required").each(function(e,i){if(!t(i).val()){t(i).addClass("erro");var n=t("label[for="+t(i).attr("id")+"]",this);n.length&&a.push(n.text()+"は必須項目です。")}}),a.length&&e.preventDefault()}),t(document).on("click","a.list-creator",function(a){a.preventDefault();var i=t(this).attr("href");e.modal.open(t(this).attr("title"),function(e){t.get(i,{},function(t){e.removeClass("loading"),e.find(".modal-body").html(t.html)})})}),t(document).on("submit",".list-create-form",function(e){e.preventDefault();var a=t(this);a.addClass("loading"),a.ajaxSubmit({success:function(t){t.success?a.trigger("created.hametuha",[t.post]):window.alert(t.message),a.find("input[type=submit]").attr("disabled",!1),a.removeClass("loading")}})}),t(".modal").on("created.hametuha",".list-create-form",function(a,i){e.modal.close(),e.ga.hitEvent("list","add",i.ID),t("body").hasClass("single-lists")&&location.reload()}),t(document).on("submit",".list-save-manager",function(e){e.preventDefault();var a=t(this);a.addClass("loading"),a.ajaxSubmit({success:function(e){a.find("input[type=submit]").attr("disabled",!1),a.removeClass("loading");var i=t('<div class="alert alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">閉じる</span></button></div>');i.addClass("alert-"+(e.success?"success":"danger")).append("<span>"+e.message+"</span>"),a.prepend(i),setTimeout(function(){i.find("button").trigger("click")},5e3)}})}),t(document).on("click",".list-eraser",function(e){e.preventDefault(),window.confirm(t(this).attr("title"))&&t.post(t(this).attr("href"),function(e){window.alert(e.message),e.success&&t("body").hasClass("single-lists")&&(window.location.href=e.url)})});var o=t("#my-list-deleter");o.length&&(t("ol.media-list > li").each(function(e,a){t(a).find(".list-inline").append(o.render({postId:t(a).attr("data-post-id")}))}),t("ol.media-list").on("click",".deregister-button",function(a){a.preventDefault();var i=t(this);window.confirm("リストからこの作品を削除します。この操作は取り消せませんが、よろしいですか？")&&t.post(i.attr("href"),{},function(a){a.success?(i.parents("li.media").remove(),t("ol.media-list > li").length||(t("ol.media-list").before('<div class="alert alert-danger">'+a.message+"</div>"),setTimeout(function(){window.location.href=a.home_url},3e3))):e.alert(a.message)})})),t(".row--share").each(function(e,a){var i=t(this);t.get(i.attr("data-share-url")).done(function(t){if(t.success)for(var e in t.result)t.result.hasOwnProperty(e)&&i.find("a.share--"+e+" span").text(t.result[e])}).fail(function(){}).always(function(){})}),t(".share--facebook").click(function(e){e.preventDefault();var a=t(this).attr("data-target");FB.ui({method:"share",href:t(this).attr("href")},function(t){try{ga.send({hitType:"social",socialNetwork:"facebook",socialAction:"share",socialTarget:a})}catch(e){}})}),t(".share--line").click(function(e){try{var a=t(this).attr("href");ga.send({hitType:"social",socialNetwork:"line",socialAction:"share",socialTarget:t(this).attr("date-target"),hitCallback:function(){window.location.href=a}}),e.preventDefault()}catch(i){}})});
//# sourceMappingURL=map/common.js.map