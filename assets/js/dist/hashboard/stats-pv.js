/*!
 * wpdeps=hashboard,hb-components-bar-chart,hb-components-month-selector, hb-plugins-date
 */
!function(u){"use strict";new Vue({el:"#access-container",data:function(){var t=new Date,e=t.getFullYear(),a=("0"+(t.getMonth()+1)).slice(-2);return{loading:!1,from:[e,a,"01"].join("-"),to:[e,a,u.hbGetLastDateOfMonth(e,a)].join("-"),rankings:[],records:[],chartData:{},options:{responsive:!0,maintainAspectRatio:!1,tooltips:{enabled:!0,mode:"index",callbacks:{label:function(t,e){return t.yLabel+"PV（"+e.datasets[t.datasetIndex].label+"）"}}},scales:{yAxes:[{stacked:!0}]}}}},computed:{},mounted:function(){this.fetch()},methods:{filledLabels:function(t,e){for(var a=new Date(t),n=new Date(e),o=[];a<=n;a.setDate(a.getDate()+1))o.push(a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2));return o},skeleton:function(t){for(var e=[],a=0;a<t;a++)e.push(0);return e},dateChangeHandler:function(t,e){e=("0"+e).slice(-2),this.from=[t,e,"01"].join("-"),this.to=[t,e,u.hbGetLastDateOfMonth(t,e)].join("-"),this.fetch()},fillDataSet:function(t,e,a,n,o){t[a]||(t[a]=this.skeleton(e.length));var r=e.indexOf(n);-1<r&&(t[a][r]+=o)},fetch:function(){this.loading=!0;var h=this;u.hbRest("GET",u("#access-container").attr("data-endpoint"),{from:this.from,to:this.to}).done(function(t){for(var e,a,n=0,o=t.rankings.length;n<o;n++){for(a=e=0;a<o&&t.rankings[a].pv>t.rankings[n].pv;a++)e++;t.rankings[n].rank=e+1}h.rankings=t.rankings;var r={},s=h.filledLabels(t.start,t.end),i={};u.each(t.records,function(t,e){h.fillDataSet(i,s,e.post_type,e.date,e.pv)}),r.labels=s,r.datasets=[];var l=[[255,12,62],[0,153,232],[247,124,0],[95,125,140],[52,143,55],[255,59,0],[124,19,164],[68,90,101],[0,184,214],[110,76,64]],c=0;for(var d in i)if(i.hasOwnProperty(d)){var f=l[c].join(", ");r.datasets.push({type:"line",lineTension:0,label:d,data:i[d],backgroundColor:"rgb("+f+")",borderColor:"rgba("+f+", .6)"}),c++}h.chartData=r,h.records=t.records}).fail(u.hbRestError()).always(function(){h.loading=!1})}}})}(jQuery);
//# sourceMappingURL=../map/hashboard/stats-pv.js.map
