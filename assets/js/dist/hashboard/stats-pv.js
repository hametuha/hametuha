!function(t){"use strict";new Vue({el:"#access-container",data:{loading:!1,from:"2017-10-01",to:"2017-10-31",rankings:[],records:[],chartData:{},options:{responsive:!0,maintainAspectRatio:!1,tooltips:{enabled:!0,mode:"index",callbacks:{label:function(t,e){return t.yLabel+"PV（"+e.datasets[t.datasetIndex].label+"）"}}},scales:{yAxes:[{stacked:!0}]}}},computed:{},mounted:function(){this.fetch()},methods:{filledLabels:function(t,e){for(var a=new Date(t),n=new Date(e),r=[];a<=n;a.setDate(a.getDate()+1))r.push(a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2));return r},skeleton:function(t){for(var e=[],a=0;a<t;a++)e.push(0);return e},fillDataSet:function(t,e,a,n,r){t[a]||(t[a]=this.skeleton(e.length));var s=e.indexOf(n);s>-1&&(t[a][s]+=r)},fetch:function(){this.loading=!0;var e=this;t.hbRest("GET",t("#access-container").attr("data-endpoint"),{from:this.from,to:this.to}).done(function(a){for(var n,r,s=0,o=a.rankings.length;s<o;s++){for(n=0,r=0;r<o&&a.rankings[r].pv>a.rankings[s].pv;r++)n++;a.rankings[s].rank=n+1}e.rankings=a.rankings;var i={},l=e.filledLabels(a.start,a.end),c={};t.each(a.records,function(t,a){e.fillDataSet(c,l,a.post_type,a.date,a.pv)}),i.labels=l,i.datasets=[];var d=[[255,12,62],[0,153,232],[247,124,0],[95,125,140],[52,143,55],[255,59,0],[124,19,164],[68,90,101],[0,184,214],[110,76,64]],f=0;for(var u in c)if(c.hasOwnProperty(u)){var h=d[f].join(", ");i.datasets.push({type:"line",lineTension:0,label:u,data:c[u],backgroundColor:"rgb("+h+")",borderColor:"rgba("+h+", .6)"}),f++}e.chartData=i,e.records=a.records}).fail(t.hbRestError()).always(function(){e.loading=!1})}}})}(jQuery);
//# sourceMappingURL=../map/hashboard/stats-pv.js.map
