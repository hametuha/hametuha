/*!
 * wpdeps=hashboard,hb-components-bar-chart,hb-components-month-selector, hb-plugins-date
 */
!function(t){"use strict";new Vue({el:"#access-container",data:function(){var e=new Date,a=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2);return{loading:!1,from:[a,n,"01"].join("-"),to:[a,n,t.hbGetLastDateOfMonth(a,n)].join("-"),rankings:[],records:[],chartData:{},options:{responsive:!0,maintainAspectRatio:!1,tooltips:{enabled:!0,mode:"index",callbacks:{label:function(t,e){return t.yLabel+"PV（"+e.datasets[t.datasetIndex].label+"）"}}},scales:{yAxes:[{stacked:!0}]}}}},computed:{},mounted:function(){this.fetch()},methods:{filledLabels:function(t,e){for(var a=new Date(t),n=new Date(e),o=[];a<=n;a.setDate(a.getDate()+1))o.push(a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2));return o},skeleton:function(t){for(var e=[],a=0;a<t;a++)e.push(0);return e},dateChangeHandler:function(e,a){a=("0"+a).slice(-2),this.from=[e,a,"01"].join("-"),this.to=[e,a,t.hbGetLastDateOfMonth(e,a)].join("-"),this.fetch()},fillDataSet:function(t,e,a,n,o){t[a]||(t[a]=this.skeleton(e.length));var r=e.indexOf(n);r>-1&&(t[a][r]+=o)},fetch:function(){this.loading=!0;var e=this;t.hbRest("GET",t("#access-container").attr("data-endpoint"),{from:this.from,to:this.to}).done(function(a){for(var n,o,r=0,s=a.rankings.length;r<s;r++){for(n=0,o=0;o<s&&a.rankings[o].pv>a.rankings[r].pv;o++)n++;a.rankings[r].rank=n+1}e.rankings=a.rankings;var i={},l=e.filledLabels(a.start,a.end),c={};t.each(a.records,function(t,a){e.fillDataSet(c,l,a.post_type,a.date,a.pv)}),i.labels=l,i.datasets=[];var d=[[255,12,62],[0,153,232],[247,124,0],[95,125,140],[52,143,55],[255,59,0],[124,19,164],[68,90,101],[0,184,214],[110,76,64]],f=0;for(var h in c)if(c.hasOwnProperty(h)){var u=d[f].join(", ");i.datasets.push({type:"line",lineTension:0,label:h,data:c[h],backgroundColor:"rgb("+u+")",borderColor:"rgba("+u+", .6)"}),f++}e.chartData=i,e.records=a.records}).fail(t.hbRestError()).always(function(){e.loading=!1})}}})}(jQuery);
//# sourceMappingURL=../map/hashboard/stats-pv.js.map
