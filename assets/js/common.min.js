!function(a){window.Hametuha={ga:{hitEvent:function(a,b,c,d,e){try{"undefined"==typeof d&&(d=1),ga("send",{hitType:"event",eventCategory:a,eventAction:b,eventLabel:c,eventValue:d,nonInteraction:!!e})}catch(f){}},eventOutbound:function(a,b,c,d,e){try{ga("send",{hitType:"event",eventCategory:c,eventAction:d,eventLabel:e,hitCallback:function(){window.location.href=b}}),a.preventDefault()}catch(f){}}},str:{yakumono:/^[ 　【】『』「」（）””""''’’—\-\(\)]/,startYakumono:function(a){return this.yakumono.test(a)}},alert:function(a){alert(a)},isTategaki:function(){return a("body").hasClass("tategaki")},models:{},views:{},collections:{},modal:{open:function(b,c){var d=a("#hametu-modal");d.find(".modal-title").html(b),"function"==typeof c?(d.addClass("loading"),c(d)):d.find(".modal-body").html(c),d.modal("show")},close:function(){var b=a("#hametu-modal");b.find(".modal-title").html(""),b.find(".modal-body").html(""),b.modal("hide")}}}}(jQuery),jQuery(document).ready(function(a){a("form").submit(function(){a(this).find("input[type=submit]").attr("disabled",!0)}),a(".pseudo-uploader").each(function(b,c){var d=a(c).next("input");a(c).on("click",".btn",function(a){a.preventDefault(),d.trigger("click")}),d.change(function(){var b=a(this).val().split("\\");a(c).find("input[type=text]").val(b[b.length-1])})}),a(".form-unlimiter").click(function(){a(this).parents("form").find("input[type=submit]").prop("disabled",!a(this).attr("checked"))}),a("a[data-confirm], input[data-confirm]").click(function(){return confirm(a(this).attr("data-confirm"))?void 0:!1}),a("[data-toggle=offcanvas]").click(function(){a("body").toggleClass("offcanvas-on")}),a(".help-tip").tooltip({trigger:"hover focus click",container:"body"}),a(document).on("click","a.share",function(b){var c=window.Hametuha.ga,d=a(this).attr("data-medium"),e=a(this).attr("href"),f=a(this).attr("data-target");switch(d){case"facebook":try{FB.ui({method:"share",href:e},function(a){a&&c.hitEvent("share",d,f)})}catch(g){}break;default:c.eventOutbound(b,e,"share",d,f)}});var b=a("#profile-navi");if(b.length){var c={};a("section","#your-profile").each(function(b,d){var e="profile-section-"+(b+1);a(d).attr("id",e),c[e]=a(d).find("h2, h3:first-child").text()});for(var d in c)c.hasOwnProperty(d)&&b.append('<li><a href="#'+d+'">'+c[d]+"</a></li>")}a(".validator").submit(function(b){a(this).find("runtime-error").remove();var c=[];a(this).find(".required").each(function(b,d){if(!a(d).val()){a(d).addClass("erro");var e=a("label[for="+a(d).attr("id")+"]",this);e.length&&c.push(e.text()+"は必須項目です。")}}),c.length&&b.preventDefault()}),a(document).on("click","a.list-creator",function(b){b.preventDefault();var c=a(this).attr("href");Hametuha.modal.open(a(this).attr("title"),function(b){a.get(c,{},function(a){b.removeClass("loading"),b.find(".modal-body").html(a.html)})})}),a(document).on("submit",".list-create-form",function(b){b.preventDefault();var c=a(this);c.addClass("loading"),c.ajaxSubmit({success:function(a){a.success?c.trigger("created.hametuha",[a.post]):alert(a.message),c.find("input[type=submit]").attr("disabled",!1),c.removeClass("loading")}})}),a(".modal").on("created.hametuha",".list-create-form",function(b,c){Hametuha.modal.close(),Hametuha.ga.hitEvent("list","add",c.ID),a("body").hasClass("single-lists")&&location.reload()}),a(document).on("submit",".list-save-manager",function(b){b.preventDefault();var c=a(this);c.addClass("loading"),c.ajaxSubmit({success:function(b){c.find("input[type=submit]").attr("disabled",!1),c.removeClass("loading");var d=a('<div class="alert alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">閉じる</span></button></div>');d.addClass("alert-"+(b.success?"success":"danger")).append("<span>"+b.message+"</span>"),c.prepend(d),setTimeout(function(){d.find("button").trigger("click")},5e3)}})}),a(document).on("click",".list-eraser",function(b){b.preventDefault(),confirm(a(this).attr("title"))&&a.post(a(this).attr("href"),function(b){alert(b.message),b.success&&a("body").hasClass("single-lists")&&(window.location.href=b.url)})});var e=a("#my-list-deleter");e.length&&(a("ol.media-list > li").each(function(b,c){a(c).find(".list-inline").append(e.render({postId:a(c).attr("data-post-id")}))}),a("ol.media-list").on("click",".deregister-button",function(b){b.preventDefault();var c=a(this);confirm("リストからこの作品を削除します。この操作は取り消せませんが、よろしいですか？")&&a.post(c.attr("href"),{},function(b){b.success?(c.parents("li.media").remove(),a("ol.media-list > li").length||(a("ol.media-list").before('<div class="alert alert-danger">'+b.message+"</div>"),setTimeout(function(){window.location.href=b.home_url},3e3))):alert(b.message)})}))});
//# sourceMappingURL=common.min.js.map