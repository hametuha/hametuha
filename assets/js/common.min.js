!function($){window.Hametuha={ga:{hitEvent:function(t,e,a,n,i){try{"undefined"==typeof n&&(n=1),ga("send",{hitType:"event",eventCategory:t,eventAction:e,eventLabel:a,eventValue:n,nonInteraction:!!i})}catch(o){}},eventOutbound:function(t,e,a,n,i){try{ga("send",{hitType:"event",eventCategory:a,eventAction:n,eventLabel:i,hitCallback:function(){window.location.href=e}}),t.preventDefault()}catch(o){}}},str:{yakumono:/^[ 　【】『』「」（）””""''’’—\-\(\)]/,startYakumono:function(t){return this.yakumono.test(t)}},alert:function(t,e){alert(t)},isTategaki:function(){return $("body").hasClass("tategaki")},models:{},views:{},collections:{},modal:{open:function(t,e){var a=$("#hametu-modal");a.find(".modal-title").html(t),"function"==typeof e?(a.addClass("loading"),e(a)):a.find(".modal-body").html(e),a.modal("show")},close:function(){var t=$("#hametu-modal");t.find(".modal-title").html(""),t.find(".modal-body").html(""),t.modal("hide")}}}}(jQuery),jQuery(document).ready(function($){$("form").submit(function(){$(this).find("input[type=submit]").attr("disabled",!0)}),$(".pseudo-uploader").each(function(t,e){var a=$(e).next("input");$(e).on("click",".btn",function(t){t.preventDefault(),a.trigger("click")}),a.change(function(t){var a=$(this).val().split("\\");$(e).find("input[type=text]").val(a[a.length-1])})}),$(".form-unlimiter").click(function(t){$(this).parents("form").find("input[type=submit]").prop("disabled",!$(this).attr("checked"))}),$("a[data-confirm], input[data-confirm]").click(function(t){return confirm($(this).attr("data-confirm"))?void 0:!1}),$("[data-toggle=offcanvas]").click(function(){$("body").toggleClass("offcanvas-on")}),$(".help-tip").tooltip({trigger:"hover focus click",container:"body"}),$(document).on("click","a.share",function(t){var e=window.Hametuha.ga,a=$(this).attr("data-medium"),n=$(this).attr("href"),i=$(this).attr("data-target");switch(a){case"facebook":try{FB.ui({method:"share",href:n},function(t){t&&e.hitEvent("share",a,i)})}catch(o){}break;default:e.eventOutbound(t,n,"share",a,i)}});var t=$("#profile-navi");if(t.length){var e={};$("section","#your-profile").each(function(t,a){var n="profile-section-"+(t+1);$(a).attr("id",n),e[n]=$(a).find("h2, h3:first-child").text()});for(var a in e)e.hasOwnProperty(a)&&t.append('<li><a href="#'+a+'">'+e[a]+"</a></li>")}$(".validator").submit(function(t){$(this).find("runtime-error").remove();var e=[];$(this).find(".required").each(function(t,a){if(!$(a).val()){$(a).addClass("erro");var n=$("label[for="+$(a).attr("id")+"]",this);n.length&&e.push(n.text()+"は必須項目です。")}}),e.length&&t.preventDefault()}),$(document).on("click","a.list-creator",function(t){t.preventDefault();var e=$(this).attr("href");Hametuha.modal.open($(this).attr("title"),function(t){$.get(e,{},function(e){t.removeClass("loading"),t.find(".modal-body").html(e.html)})})}),$(document).on("submit",".list-create-form",function(t){t.preventDefault();var e=$(this);e.addClass("loading"),e.ajaxSubmit({success:function(t){t.success?e.trigger("created.hametuha",[t.post]):alert(t.message),e.find("input[type=submit]").attr("disabled",!1),e.removeClass("loading")}})}),$(".modal").on("created.hametuha",".list-create-form",function(t,e){Hametuha.modal.close(),Hametuha.ga.hitEvent("list","add",e.ID),$("body").hasClass("single-lists")&&location.reload()}),$(document).on("submit",".list-save-manager",function(t){t.preventDefault();var e=$(this);e.addClass("loading"),e.ajaxSubmit({success:function(t){e.find("input[type=submit]").attr("disabled",!1),e.removeClass("loading");var a=$('<div class="alert alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">閉じる</span></button></div>');a.addClass("alert-"+(t.success?"success":"danger")).append("<span>"+t.message+"</span>"),e.prepend(a),setTimeout(function(){a.find("button").trigger("click")},5e3)}})}),$(document).on("click",".list-eraser",function(t){t.preventDefault(),confirm($(this).attr("title"))&&$.post($(this).attr("href"),function(t){alert(t.message),t.success&&$("body").hasClass("single-lists")&&(window.location.href=t.url)})});var n=$("#my-list-deleter");n.length&&($("ol.media-list > li").each(function(t,e){$(e).find(".list-inline").append(n.render({postId:$(e).attr("data-post-id")}))}),$("ol.media-list").on("click",".deregister-button",function(t){t.preventDefault();var e=$(this);confirm("リストからこの作品を削除します。この操作は取り消せませんが、よろしいですか？")&&$.post(e.attr("href"),{},function(t){t.success?(e.parents("li.media").remove(),$("ol.media-list > li").length||($("ol.media-list").before('<div class="alert alert-danger">'+t.message+"</div>"),setTimeout(function(){window.location.href=t.home_url},3e3))):alert(t.message)})}))});