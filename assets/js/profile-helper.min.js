jQuery(document).ready(function($){if($("#change-user-login").fancybox({width:600,height:500,type:"iframe"}),$("#check-username-valid").click(function(e){e.preventDefault();var a=$(this).next("img"),t=$(this).prev("input");a.addClass("loading"),$.post(HametuhaProfile.endpoint,{_wpnonce:HametuhaProfile.nonce,action:HametuhaProfile.usernameCheck,user_login:$(this).prev("input").val()},function(e){a.removeClass("loading"),e.valid?t.removeClass("error"):t.addClass("error"),$("#your-profile").prev("p.message").remove(),$("#your-profile").before('<p class="message '+(e.valid?"success":"error")+'" style="display:none;">'+e.message+"</p>"),$("#your-profile").prev("p.message").fadeIn()})}),$("#your-profile").submit(function(e){$("input[name=user_login]").val().match(/^[0-9a-zA-Z.\-@_]+$/)||($("input[name=user_login]").addClass("error"),$(this).prev("p.message").length>0&&$(this).prev("p.message").remove(),$(this).before('<p class="message error" style="display:none;">ユーザー名に使用できるのは半角英数と_.-@のみです。</p>'),$(this).prev("p.message").fadeIn(),e.preventDefault())}),$("#login-success-redirect").length>0)var e=5,a=setInterval(function(){0>=e?(clearInterval(a),window.parent.location.href=$("#login-success-redirect").next("a").attr("href")):(e--,$("#login-success-redirect").text(e))},1e3);$(".delete-fav").click(function(e){if(e.preventDefault(),confirm("このお気に入りフレーズを削除してよろしいですか？")){var a=parseInt($(this).attr("id").replace(/delete_fav_/,""));$(this).prev(".loader").addClass("loading"),$.post(HametuhaProfile.endpoint,{_wpnonce:HametuhaProfile.nonce,action:HametuhaProfile.deleteFavorite,fav_id:a},function(e){e.status?$("#li-fav-"+a).fadeOut("slow",function(e){$(this).remove()}):($("#li-fav-"+a+" .loader").removeClass("loading"),alert(e.message))})}}),$("#user-profile-picture-edit").fancybox({width:600,height:400,type:"iframe"}),$("input#last_name[type=text]").blur(function(e){var a=null;$(this).val().length<1?a="筆名の読みが入力されていません":$(this).val().match(/^[あ-ん 　]+$/)||(a="筆名の読みに使用できるのはひらがなだけです"),a&&$("<p></p>").text(a).addClass("small-message").addClass("error").css("display","none").insertAfter($(this)).fadeIn("normal",function(){var e=this,a=setTimeout(function(){$(e).fadeOut("normal",function(){$(this).remove()})},3e3)})})});