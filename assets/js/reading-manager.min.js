var hametuhaReadingManager={alert:function(a){window.alert(a)},bookmarks:{},tweet:function(a){var b=jQuery("link[rel=canonical]").attr("href"),c="http://twitter.com/home?status=",d=c+encodeURIComponent("QT: "+a+" "+b+" #破滅派");window.open(d,"twitter","width=600, height=400, menubar=no, toolbar=no, scrollbars=yes").focus()},saveFrase:function(a,b,c){jQuery.post(HametuhaVars.endpoint,{action:HametuhaVars.addFavorite,_wpnonce:HametuhaVars.nonce,post_id:a,location:c,frase:b},function(a){var b=a.status?"テキストをお気に入りに登録しました。":"ごめんなさい、エラーが起きたためお気に入りに登録できませんでした。";hametuhaReadingManager.getContainer().showNotification(b)})},addReview:function(a){jQuery.fancybox.open({href:HametuhaVars.feedbackURL+"&post_id="+a,title:"作品を評価する"},{type:"iframe",width:700})},isOpen:function(){return"-100%"!=jQuery("#reading-container").css("left")},toggleMetaPanel:function(a){a&&a.preventDefault();var b;switch(jQuery(this).attr("id")){case"meta-drawer":b="-100%";break;default:b=0}jQuery("#reading-container").css({left:b})},search:function(a){this.getContainer().searchContent(a)},getContainer:function(){return-1!=navigator.appName.indexOf("Microsoft")?window.reader:document.reader},fitHeight:function(){var a=jQuery("body").hasClass("mobile")?window.innerHeight:jQuery(window).height();jQuery("#reading-container").css("height",a-(jQuery("#wpadminbar").height()+jQuery("#post-feedback").height())),jQuery("body").hasClass("mobile")&&jQuery("#reading-container .inner").css("height",jQuery("#reading-container").height()-100)},embed:function(){swfobject.embedSWF(HametuhaVars.swf,"reader","100%","100%","10.2.0",HametuhaVars.expressInstall,{endpoint:HametuhaVars.endpoint,userID:HametuhaVars.userID,postID:HametuhaVars.postID,getContent:HametuhaVars.getContent,postTitle:HametuhaVars.postTitle,postAuthor:HametuhaVars.postAuthor,fontURL:HametuhaVars.fontSwf,isPreview:HametuhaVars.isPreview},{wmode:"transparent",quality:"AUTOHIGH",allowScriptAccess:"always",allowFullScreen:!0})},width:0,curPage:1,totalPage:0,pageWidth:0,startTime:0,startX:0,latestX:0,setupPagenation:function(){this.curPage=1,this.width=jQuery("#reading-container .post-content").width(),this.pageWidth=jQuery("#reading-container .inner").width(),this.totalPage=jQuery("#reading-container .post-content").width()/this.pageWidth},movePos:function(a){a=Math.max(1,a),jQuery("#reading-container .inner").scrollLeft(this.width-(a-1)*this.pageWidth),this.curPage=a},nextPage:function(){this.curPage++,this.movePos(this.curPage)},prevPage:function(){this.curPage--,this.curPage<1?this.curPage=1:this.movePos(this.curPage)},touchStart:function(a){hametuhaReadingManager.startTime=(new Date).getTime(),hametuhaReadingManager.startX=hametuhaReadingManager.latestX=a.originalEvent.touches[0].pageX,jQuery("#reading-container .inner").bind("touchmove",hametuhaReadingManager.touchMove)},touchMove:function(a){hametuhaReadingManager.latestX=a.originalEvent.touches[0].pageX},touchEnd:function(){jQuery("#reading-container .inner").unbind("touchmove",hametuhaReadingManager.touchMove),moved=hametuhaReadingManager.latestX-hametuhaReadingManager.startX,passed=(new Date).getTime()-hametuhaReadingManager.startTime,passed>1999||Math.abs(moved)<window.innerWidth/2}};jQuery(document).ready(function(a){if(a("#reading-container").length>0){var b=a(".single-post-content").remove();a("#meta-drawer, #meta-opener").click(hametuhaReadingManager.toggleMetaPanel),a("#search").focus(function(){a(this).parents("form").addClass("active")}),a("#search").blur(function(){a(this).parents("form").removeClass("active")}),a("#search-box").submit(function(b){b.preventDefault();var c=a("#search").val();c.length>0&&hametuhaReadingManager.search(c)});var c=setInterval(function(){var b=parseInt(a("#reader-open-indicator strong").text())-1;return 0>b?(a("#reader-open-indicator").remove(),clearInterval(c),void(hametuhaReadingManager.isOpen()||hametuhaReadingManager.toggleMetaPanel(!1))):void a("#reader-open-indicator strong").text(b)},1e3);hametuhaReadingManager.fitHeight(),jQuery(window).resize(function(){hametuhaReadingManager.fitHeight()}),a("body").hasClass("mobile")?(a("#reading-container .inner").append(b),setTimeout(function(){window.scrollTo(0,1),hametuhaReadingManager.fitHeight()},100),a(window).scroll(hametuhaReadingManager.fitHeight),hametuhaReadingManager.setupPagenation(),hametuhaReadingManager.movePos(1)):hametuhaReadingManager.embed()}});
//# sourceMappingURL=reading-manager.min.js.map